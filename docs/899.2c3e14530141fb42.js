"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[899],{7899:(et,x,m)=>{m.r(x),m.d(x,{SalesModule:()=>Ze});var k=m(177),u=m(2791),M=m(1174),A=m(7468),q=m(980),e=m(3953),g=m(5794),C=m(5751),U=m(5312),P=m(1626);let $=(()=>{class i{_http;baseUrl=U.c.baseUrl;constructor(t){this._http=t}getJobOrderList(){return this._http.post(`${this.baseUrl}/api/sales-JobOrder/Index`,{})}getJobOrderById(t){return this._http.get(`${this.baseUrl}/api/sales-JobOrder/GetById/${t}`)}createJobOrder(t){return this._http.post(`${this.baseUrl}/api/sales-JobOrder/Create`,t)}updateJobOrder(t,s){return this._http.post(`${this.baseUrl}/api/sales-JobOrder/Update/${t}`,s)}deleteJobOrder(t){return this._http.post(`${this.baseUrl}/api/sales-JobOrder/Delete/${t}`,{})}getSeriesforJobOrder(){return this._http.get(`${this.baseUrl}/api/setting-Series/GetSeriesAndNumberAction`,{params:{TableName:"JobOrder",SeriesTableColumn:"JobOrderNo",Screen_ID:"Job Order"}})}static \u0275fac=function(s){return new(s||i)(e.KVO(P.Qq))};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var y=m(6694);let de=(()=>{class i{_toastr;cd;_router;_activateRoute;_locationService;_jobOrderServices;_customerService;dataSource;selectedRow=[];LocationList;CustomerList;columnsSchema=[{key:"FinelSeries",label:"Job Order No"},{key:"CustomerName",label:"Customer"},{key:"QuotationNo",label:"Quotation No"},{key:"LocationName",label:"Location"},{key:"ProjectName",label:"Project"},{key:"ServicesTypeName",label:"Job Order Type"},{key:"InspectionMethodName",label:"Inspection Method"},{key:"ServiceList",label:"Service List"},{key:"InspectorCategoryName",label:"Inspector Category"},{key:"InspectorName",label:"Assigned To"},{key:"DateFrom",label:"Date From"},{key:"DateTo",label:"Date To"},{key:"SiteContactName",label:"Site Contact Name"},{key:"SiteContactMobile",label:"Site Contact Mobile"},{key:"SiteContactEmail",label:"Site Contact Email"},{key:"Description",label:"Description"},{key:"Comments",label:"Comments"}];dataList;constructor(t,s,o,r,d,c,p){this._toastr=t,this.cd=s,this._router=o,this._activateRoute=r,this._locationService=d,this._jobOrderServices=c,this._customerService=p}ngOnInit(){this.getJobOrderList()}navigateToEdit(t){t?.Id&&this._router.navigate(["edit",t.Id],{relativeTo:this._activateRoute})}onSelectedRows(t){this.selectedRow=t}deleteSelected(t){const s=t.map(o=>this._jobOrderServices.deleteJobOrder(o.Id));(0,A.p)(s).pipe((0,q.j)(()=>this.getJobOrderList())).subscribe({next:()=>{this._toastr.success("Job Order deleted successfully"),this.selectedRow=[],this.dataList.clearSelection(),this.cd.detectChanges()},error:o=>{this._toastr.error("Error deleting Job Orde")}})}getJobOrderList(){this._jobOrderServices.getJobOrderList().subscribe({next:t=>{this.dataSource=t.map(s=>({...s,FinelSeries:`${s.series}${s.JobOrderNo}`})),this.cd.detectChanges()},error:t=>{console.error("\u274c Error getting JobOrder data",t)}})}static \u0275fac=function(s){return new(s||i)(e.rXU(g.tw),e.rXU(e.gRc),e.rXU(u.Ix),e.rXU(u.nX),e.rXU(C.N),e.rXU($),e.rXU(y.v))};static \u0275cmp=e.VBU({type:i,selectors:[["app-job-order-list"]],viewQuery:function(s,o){if(1&s&&e.GBs(M.q,5),2&s){let r;e.mGM(r=e.lsd())&&(o.dataList=r.first)}},decls:2,vars:2,consts:[[3,"selectedRows","rowClick","onDelete","dataSource","columnsSchema"]],template:function(s,o){1&s&&(e.j41(0,"app-data-list",0),e.bIt("selectedRows",function(d){return o.onSelectedRows(d)})("rowClick",function(d){return o.navigateToEdit(d)})("onDelete",function(d){return o.deleteSelected(d)}),e.k0s(),e.nrm(1,"router-outlet")),2&s&&e.Y8G("dataSource",o.dataSource)("columnsSchema",o.columnsSchema)},dependencies:[u.n3,M.q]})}return i})();var a=m(9417),n=m(9079),I=m(9664),B=m(1899),X=m(4103),V=m(1826),G=m(8528),Y=m(2314);let F=(()=>{class i{_http;baseUrl=U.c.baseUrl;constructor(t){this._http=t}getSalesQuotationList(){return this._http.post(`${this.baseUrl}/api/sales-SalesQuotation/Index`,{})}getSalesQuotationById(t){return this._http.get(`${this.baseUrl}/api/sales-SalesQuotation/GetById/${t}`)}createSalesQuotation(t){return this._http.post(`${this.baseUrl}/api/sales-SalesQuotation/Create`,t)}updateSalesQuotation(t,s){return this._http.post(`${this.baseUrl}/api/sales-SalesQuotation/Update/${t}`,s)}deleteSalesQuotation(t){return this._http.post(`${this.baseUrl}/api/sales-SalesQuotation/Delete/${t}`,{})}salesQuotationLookup(){return this._http.get(`${this.baseUrl}/api/sales-SalesQuotation/SalesQuotationLookupDefualt`)}static \u0275fac=function(s){return new(s||i)(e.KVO(P.Qq))};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var J=m(386),L=m(9298),D=m(1938),E=m(5114),w=m(2242);const z=()=>["QuotationNo"],b=()=>["Id","Name"],H=()=>["Id","EnName","ArName"];function me(i,l){1&i&&(e.j41(0,"p-message",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Quotation Number is required")," "))}function ce(i,l){1&i&&(e.j41(0,"p-message",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Inspector Category is required")," "))}function ue(i,l){1&i&&(e.j41(0,"p-message",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Customer is required")," "))}function pe(i,l){1&i&&(e.j41(0,"p-message",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Location is required")," "))}function be(i,l){1&i&&(e.j41(0,"p-message",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Project is required")," "))}function he(i,l){1&i&&(e.j41(0,"p-message",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Job Order Type is required")," "))}function Ie(i,l){1&i&&(e.j41(0,"p-message",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Service List required")," "))}let ve=(()=>{class i{_toastr;_destroyRef;_router;translat;_JobOrderService;_customerService;_locationService;_projectService;_serviceType;_InspectionMethodeService;_inspectorcateg;_inspectorService;cdr;_Quotation;appendTo=null;data;errorMessage="";customerList=[];LocationList=[];ProjectList=[];servTypeList=[];inspectionList=[];inspectorCategList=[];inspectorList=[];filteredInspectorList=[];quotationList=[];form=new a.gE({JobOrderNo:new a.MJ("",a.k0.required),CustomerId:new a.MJ(null,a.k0.required),QuotationNo:new a.MJ(""),QuotationId:new a.MJ(null),LocationId:new a.MJ(null,a.k0.required),Series:new a.MJ(""),ProjectId:new a.MJ(null,a.k0.required),JobOrderTypeServicesTypeId:new a.MJ(null,a.k0.required),InspectionMethodId:new a.MJ(null,a.k0.required),ServiceList:new a.MJ("",a.k0.required),InspectorCategoryId:new a.MJ(null,a.k0.required),AssignedTo:new a.MJ(null,a.k0.required),SiteContactName:new a.MJ("",a.k0.required),SiteContactMobile:new a.MJ("",a.k0.required),SiteContactEmail:new a.MJ("",a.k0.required),Description:new a.MJ(""),Comments:new a.MJ(""),DateFrom:new a.MJ(null,a.k0.required),DateTo:new a.MJ(null,a.k0.required),SeriesNumber:new a.MJ("",a.k0.required),SeriesCode:new a.MJ("",a.k0.required),Separator:new a.MJ("",a.k0.required)});constructor(t,s,o,r,d,c,p,v,S,f,T,_,N,R){this._toastr=t,this._destroyRef=s,this._router=o,this.translat=r,this._JobOrderService=d,this._customerService=c,this._locationService=p,this._projectService=v,this._serviceType=S,this._InspectionMethodeService=f,this._inspectorcateg=T,this._inspectorService=_,this.cdr=N,this._Quotation=R}ngOnInit(){this.form.valueChanges.pipe((0,n.pQ)(this._destroyRef)).subscribe(),this.getLocationList(),this.getInspectionMethodList(),this.getCustomerList(),this.getInspectorCategoryList(),this.getservTypeList(),this.getProjectList(),this.getQuotationList(),this.form.get("InspectorCategoryId")?.valueChanges.pipe((0,n.pQ)(this._destroyRef)).subscribe(t=>{this.getInspectorList(t||void 0),this.form.patchValue({AssignedTo:null})}),this.form.get("QuotationId")?.valueChanges.pipe((0,n.pQ)(this._destroyRef)).subscribe(t=>{const s=this.quotationList.find(o=>o.QuotationId===t);s&&this.form.patchValue({QuotationNo:s.QuotationNo})}),this._JobOrderService.getSeriesforJobOrder().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.form.patchValue({JobOrderNo:t.FinelSeriesCodeAndSeriesNumber,SeriesNumber:t.SeriesNumber,SeriesCode:t.SeriesCode,Separator:t.Separator}),this.form.get("JobOrderNo")?.disable()},error:t=>console.error("Series API Error:",t)})}createOrder(){if(this.form.invalid)return void this.form.markAllAsTouched();const t=this.form.getRawValue(),s={JobOrderNo:t.SeriesNumber,CustomerId:t.CustomerId,QuotationNo:t.QuotationNo,QuotationId:t.QuotationId,LocationId:t.LocationId,series:t.SeriesCode+t.Separator,ProjectId:t.ProjectId,JobOrderTypeServicesTypeId:t.JobOrderTypeServicesTypeId,InspectionMethodId:t.InspectionMethodId,ServiceList:t.ServiceList,InspectorCategoryId:t.InspectorCategoryId,AssignedTo:t.AssignedTo,SiteContactName:t.SiteContactName,SiteContactMobile:t.SiteContactMobile,SiteContactEmail:t.SiteContactEmail,Description:t.Description,Comments:t.Comments,DateFrom:new Date(t.DateFrom).toISOString(),DateTo:new Date(t.DateTo).toISOString()};this._JobOrderService.createJobOrder(s).pipe((0,n.pQ)(this._destroyRef)).subscribe({next:o=>{this.data=o,this._toastr.success("Job Order created successfully"),this._JobOrderService.getSeriesforJobOrder().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:r=>{this.form.reset(),this.form.patchValue({JobOrderNo:r.FinelSeriesCodeAndSeriesNumber,SeriesNumber:r.SeriesNumber,SeriesCode:r.SeriesCode,Separator:r.Separator}),this.form.get("JobOrderNo")?.disable()}}),setTimeout(()=>this._router.navigate(["/sales/job-order"]),1500)},error:o=>{console.error("JobOrder create error:",o),this._toastr.error(o.error?.title||o.message)}})}getCustomerList(){this._customerService.getCustomerLookUp().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.customerList=t,error:t=>this.errorMessage=t.message})}getLocationList(){this._locationService.getLocationLookUp().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.LocationList=t,error:t=>this.errorMessage=t.message})}getProjectList(){this._projectService.getProjectLookUp().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.ProjectList=t,error:t=>this.errorMessage=t.message})}getservTypeList(){this._serviceType.serviceTypeLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.servTypeList=t,error:t=>this.errorMessage=t.message})}getInspectionMethodList(){this._InspectionMethodeService.getInspectionMethodLookUP().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.inspectionList=t,error:t=>this.errorMessage=t.message})}getInspectorCategoryList(){this._inspectorcateg.InspectorCategoryLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.inspectorCategList=t,error:t=>this.errorMessage=t.message})}getQuotationList(){this._Quotation.salesQuotationLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.quotationList=t.map(s=>({QuotationId:s.Id,QuotationNo:s.QuotationNumber})),error:t=>this.errorMessage=t.message})}getInspectorList(t){this._inspectorService.getInspectorLookUP(t).pipe((0,n.pQ)(this._destroyRef)).subscribe({next:s=>{this.filteredInspectorList=s,this.cdr.detectChanges()},error:s=>{console.error("Inspector API error:",s),this.errorMessage=s.message}})}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}static \u0275fac=function(s){return new(s||i)(e.rXU(g.tw),e.rXU(e.abz),e.rXU(u.Ix),e.rXU(I.c$),e.rXU($),e.rXU(y.v),e.rXU(C.N),e.rXU(B.T),e.rXU(X.H),e.rXU(V.t),e.rXU(G.V),e.rXU(Y.j),e.rXU(e.gRc),e.rXU(F))};static \u0275cmp=e.VBU({type:i,selectors:[["app-job-order-add"]],inputs:{appendTo:"appendTo"},decls:99,vars:133,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3"],[1,"container-fluid","mx-4"],[1,"row"],[1,"col-md-4","mb-5"],["for","JobOrderNo",1,"mb-2","d-block"],["pInputText","","type","text","id","JobOrderNo","formControlName","JobOrderNo","readonly","",1,"w-100","mb-2"],["for","quotationList",1,"mb-2","d-block"],["formControlName","QuotationId",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","inspectorCategList",1,"mb-2","d-block"],["formControlName","InspectorCategoryId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","filteredInspectorList",1,"mb-2","d-block"],["formControlName","AssignedTo",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","CustomerList",1,"mb-2","d-block"],["formControlName","CustomerId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","LocationList",1,"mb-2","d-block"],["formControlName","LocationId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","ProjectList",1,"mb-2","d-block"],["formControlName","ProjectId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","servTypeList",1,"mb-2","d-block"],["formControlName","JobOrderTypeServicesTypeId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","inspectionList",1,"mb-2","d-block"],["formControlName","InspectionMethodId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","ServiceList",1,"mb-2","d-block"],["pInputText","","type","text","id","ServiceList","formControlName","ServiceList",1,"w-100","mb-2"],["for","SiteContactName",1,"mb-2","d-block"],["pInputText","","type","text","id","SiteContactName","formControlName","SiteContactName",1,"w-100","mb-2"],["for","SiteContactMobile",1,"mb-2","d-block"],["pInputText","","type","text","id","SiteContactMobile","formControlName","SiteContactMobile",1,"w-100","mb-2"],["for","SiteContactEmail",1,"mb-2","d-block"],["pInputText","","type","email","id","SiteContactEmail","formControlName","SiteContactEmail",1,"w-100","mb-2"],["for","DateFrom",1,"mb-2","d-block"],["pInputText","","type","date","id","DateFrom","formControlName","DateFrom",1,"w-100","mb-2"],["for","DateTo",1,"mb-2","d-block"],["pInputText","","type","date","id","DateTo","formControlName","DateTo",1,"w-100","mb-2"],[1,"col-md-12"],["for","Description",1,"mb-2","d-block"],["pInputText","","id","Description","formControlName","Description","rows","3","autoResize","true","placeholder","Enter Description...",1,"w-100","mb-2"],["for","Comments",1,"mb-2","d-block"],["pInputText","","id","Comments","formControlName","Comments","rows","3","autoResize","true","placeholder","Enter comments...",1,"w-100","mb-2"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.createOrder()}),e.j41(1,"div",1)(2,"app-submit-btns",2),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(3,"div",3),e.nrm(4,"app-breadcrump"),e.j41(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.nrm(11,"input",8),e.k0s(),e.j41(12,"div",6)(13,"label",9),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.nrm(16,"app-auto-complete",10),e.DNE(17,me,3,3,"p-message",11),e.k0s(),e.j41(18,"div",6)(19,"label",12),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.nrm(22,"app-auto-complete",13),e.DNE(23,ce,3,3,"p-message",11),e.k0s(),e.j41(24,"div",6)(25,"label",14),e.EFF(26),e.nI1(27,"translate"),e.k0s(),e.nrm(28,"app-auto-complete",15),e.k0s(),e.j41(29,"div",6)(30,"label",16),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.nrm(33,"app-auto-complete",17),e.DNE(34,ue,3,3,"p-message",11),e.k0s(),e.j41(35,"div",6)(36,"label",18),e.EFF(37),e.nI1(38,"translate"),e.k0s(),e.nrm(39,"app-auto-complete",19),e.DNE(40,pe,3,3,"p-message",11),e.k0s(),e.j41(41,"div",6)(42,"label",20),e.EFF(43),e.nI1(44,"translate"),e.k0s(),e.nrm(45,"app-auto-complete",21),e.DNE(46,be,3,3,"p-message",11),e.k0s(),e.j41(47,"div",6)(48,"label",22),e.EFF(49),e.nI1(50,"translate"),e.k0s(),e.nrm(51,"app-auto-complete",23),e.DNE(52,he,3,3,"p-message",11),e.k0s(),e.j41(53,"div",6)(54,"label",24),e.EFF(55),e.nI1(56,"translate"),e.k0s(),e.nrm(57,"app-auto-complete",25),e.k0s(),e.j41(58,"div",6)(59,"label",26),e.EFF(60),e.nI1(61,"translate"),e.k0s(),e.nrm(62,"input",27),e.DNE(63,Ie,3,3,"p-message",11),e.k0s(),e.j41(64,"div",6)(65,"label",28),e.EFF(66),e.nI1(67,"translate"),e.k0s(),e.nrm(68,"input",29),e.k0s(),e.j41(69,"div",6)(70,"label",30),e.EFF(71),e.nI1(72,"translate"),e.k0s(),e.nrm(73,"input",31),e.k0s(),e.j41(74,"div",6)(75,"label",32),e.EFF(76),e.nI1(77,"translate"),e.k0s(),e.nrm(78,"input",33),e.k0s(),e.j41(79,"div",6)(80,"label",34),e.EFF(81),e.nI1(82,"translate"),e.k0s(),e.nrm(83,"input",35),e.k0s(),e.j41(84,"div",6)(85,"label",36),e.EFF(86),e.nI1(87,"translate"),e.k0s(),e.nrm(88,"input",37),e.k0s(),e.j41(89,"div",38)(90,"label",39),e.EFF(91),e.nI1(92,"translate"),e.k0s(),e.nrm(93,"textarea",40),e.k0s(),e.j41(94,"div",38)(95,"label",41),e.EFF(96),e.nI1(97,"translate"),e.k0s(),e.nrm(98,"textarea",42),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(7),e.JRh(e.bMT(10,83,"Job Order Number")),e.R7$(5),e.JRh(e.bMT(15,85,"Quotation Number")),e.R7$(2),e.Y8G("data",o.quotationList)("displayField",e.lJ4(117,z))("searchFields",e.lJ4(118,z))("valueField","QuotationId")("lookupData",o.quotationList)("readonly",!1)("validStyle",o.isInvalid("QuotationId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("QuotationNo")?17:-1),e.R7$(3),e.JRh(e.bMT(21,87,"Inspector Category ")),e.R7$(2),e.Y8G("data",o.inspectorCategList)("displayField",e.lJ4(119,b))("searchFields",e.lJ4(120,b))("valueField","Id")("lookupData",o.inspectorCategList)("readonly",!1)("validStyle",o.isInvalid("InspectorCategoryId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("InspectorCategoryId")?23:-1),e.R7$(3),e.JRh(e.bMT(27,89,"Assigned To")),e.R7$(2),e.Y8G("data",o.filteredInspectorList)("displayField",e.lJ4(121,b))("searchFields",e.lJ4(122,b))("valueField","Id")("lookupData",o.filteredInspectorList)("readonly",!1)("validStyle",o.isInvalid("AssignedTo")?"ng-invalid":""),e.R7$(3),e.JRh(e.bMT(32,91,"Customer Name")),e.R7$(2),e.Y8G("data",o.customerList)("displayField",e.lJ4(123,H))("searchFields",e.lJ4(124,H))("valueField","Id")("lookupData",o.customerList)("readonly",!1)("validStyle",o.isInvalid("CustomerId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CustomerId")?34:-1),e.R7$(3),e.JRh(e.bMT(38,93,"Location ")),e.R7$(2),e.Y8G("data",o.LocationList)("displayField",e.lJ4(125,b))("searchFields",e.lJ4(126,b))("valueField","Id")("lookupData",o.LocationList)("readonly",!1)("validStyle",o.isInvalid("LocationId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("LocationId")?40:-1),e.R7$(3),e.JRh(e.bMT(44,95,"Project ")),e.R7$(2),e.Y8G("data",o.ProjectList)("displayField",e.lJ4(127,b))("searchFields",e.lJ4(128,b))("valueField","Id")("lookupData",o.ProjectList)("readonly",!1)("validStyle",o.isInvalid("ProjectId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("ProjectId")?46:-1),e.R7$(3),e.JRh(e.bMT(50,97,"Job Order Type")),e.R7$(2),e.Y8G("data",o.servTypeList)("displayField",e.lJ4(129,b))("searchFields",e.lJ4(130,b))("valueField","Id")("lookupData",o.servTypeList)("readonly",!1)("validStyle",o.isInvalid("JobOrderTypeServicesTypeId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("JobOrderTypeServicesTypeId")?52:-1),e.R7$(3),e.JRh(e.bMT(56,99,"Inspection Method ")),e.R7$(2),e.Y8G("data",o.inspectionList)("displayField",e.lJ4(131,b))("searchFields",e.lJ4(132,b))("valueField","Id")("lookupData",o.inspectionList)("readonly",!1)("validStyle",o.isInvalid("InspectionMethodId")?"ng-invalid":""),e.R7$(3),e.JRh(e.bMT(61,101,"Service List ")),e.R7$(3),e.vxM(o.isInvalid("ServiceList")?63:-1),e.R7$(3),e.JRh(e.bMT(67,103,"Site Contact Name")),e.R7$(5),e.JRh(e.bMT(72,105,"Site Contact Mobile")),e.R7$(5),e.JRh(e.bMT(77,107,"Site Contact Email")),e.R7$(5),e.JRh(e.bMT(82,109,"Date From")),e.R7$(5),e.JRh(e.bMT(87,111,"Date To")),e.R7$(5),e.JRh(e.bMT(92,113,"Description")),e.R7$(5),e.JRh(e.bMT(97,115,"Comments")))},dependencies:[J.R,a.qT,a.me,a.BC,a.cb,L.V,a.j4,a.JD,D.S,E.QB,w.Sm,I.D9]})}return i})();const K=()=>["QuotationNo"],h=()=>["Id","Name"],Z=()=>["Id","EnName","ArName"];function Se(i,l){1&i&&(e.j41(0,"p-message",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Quotation Number is required")," "))}function fe(i,l){1&i&&(e.j41(0,"p-message",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Inspector Category is required")," "))}function ge(i,l){1&i&&(e.j41(0,"p-message",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Assigned To is required")," "))}function Ce(i,l){1&i&&(e.j41(0,"p-message",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Customer is required")," "))}function ke(i,l){1&i&&(e.j41(0,"p-message",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Location is required")," "))}function ye(i,l){1&i&&(e.j41(0,"p-message",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Project is required")," "))}function Fe(i,l){1&i&&(e.j41(0,"p-message",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Job Order Type is required")," "))}function Te(i,l){1&i&&(e.j41(0,"p-message",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Service List required")," "))}let _e=(()=>{class i{_toastr;_destroyRef;_router;translat;_JobOrderService;_customerService;_locationService;_projectService;_serviceType;_InspectionMethodeService;_inspectorcateg;_inspectorService;_activateRoute;_Quotation;cdr;data;errorMessage="";jobOrderId;seriesNumber;separator;customerList=[];LocationList=[];ProjectList=[];servTypeList=[];inspectionList=[];inspectorCategList=[];filteredInspectorList=[];quotationList=[];form=new a.gE({Id:new a.MJ(null),JobOrderNo:new a.MJ("",a.k0.required),CustomerId:new a.MJ(null,a.k0.required),QuotationId:new a.MJ(null),LocationId:new a.MJ(null,a.k0.required),ProjectId:new a.MJ(null,a.k0.required),JobOrderTypeServicesTypeId:new a.MJ(null,a.k0.required),InspectionMethodId:new a.MJ(null,a.k0.required),ServiceList:new a.MJ("",a.k0.required),InspectorCategoryId:new a.MJ(null,a.k0.required),AssignedTo:new a.MJ(null,a.k0.required),SiteContactName:new a.MJ("",a.k0.required),SiteContactMobile:new a.MJ("",a.k0.required),SiteContactEmail:new a.MJ("",a.k0.required),Description:new a.MJ(""),Comments:new a.MJ(""),DateFrom:new a.MJ("",a.k0.required),DateTo:new a.MJ("",a.k0.required),SeriesNumber:new a.MJ("",a.k0.required),SeriesCode:new a.MJ("",a.k0.required),Separator:new a.MJ("",a.k0.required),QuotationNo:new a.MJ("")});constructor(t,s,o,r,d,c,p,v,S,f,T,_,N,R,We){this._toastr=t,this._destroyRef=s,this._router=o,this.translat=r,this._JobOrderService=d,this._customerService=c,this._locationService=p,this._projectService=v,this._serviceType=S,this._InspectionMethodeService=f,this._inspectorcateg=T,this._inspectorService=_,this._activateRoute=N,this._Quotation=R,this.cdr=We}ngOnInit(){this.form.valueChanges.pipe((0,n.pQ)(this._destroyRef)).subscribe(()=>{this.cdr.detectChanges()}),this.getLocationList(),this.getInspectionMethodList(),this.getCustomerList(),this.getInspectorCategoryList(),this.getservTypeList(),this.getProjectList(),this.getQuotationList(),this.jobOrderId=Number(this._activateRoute.snapshot.paramMap.get("id")),this.jobOrderId&&this.OrderById(this.jobOrderId),this.form.get("InspectorCategoryId")?.valueChanges.pipe((0,n.pQ)(this._destroyRef)).subscribe(t=>this.getInspectorList(t??void 0)),this.form.get("QuotationId")?.valueChanges.pipe((0,n.pQ)(this._destroyRef)).subscribe(t=>{const s=this.quotationList.find(o=>o.QuotationId===t);s&&this.form.patchValue({QuotationNo:s.QuotationNo})})}OrderById(t){this._JobOrderService.getJobOrderById(t).pipe((0,n.pQ)(this._destroyRef)).subscribe({next:s=>{const o=s.series+s.JobOrderNo,r=s.series.match(/^(.+?)(.)$/);this.form.patchValue({Id:s.Id,JobOrderNo:o,SeriesCode:r?r[1]:"",Separator:r?r[2]:"",SeriesNumber:s.JobOrderNo,CustomerId:s.CustomerId,QuotationId:s.QuotationId,QuotationNo:s.QuotationNo,LocationId:s.LocationId,ProjectId:s.ProjectId,JobOrderTypeServicesTypeId:s.JobOrderTypeServicesTypeId,InspectionMethodId:s.InspectionMethodId,ServiceList:s.ServiceList,InspectorCategoryId:s.InspectorCategoryId,AssignedTo:s.AssignedTo,SiteContactName:s.SiteContactName,SiteContactMobile:s.SiteContactMobile,SiteContactEmail:s.SiteContactEmail,Description:s.Description,Comments:s.Comments,DateFrom:this.formatDate(s.DateFrom),DateTo:this.formatDate(s.DateTo)}),this.form.get("JobOrderNo")?.disable()}})}formatDate(t){const s=new Date(t),o=("0"+(s.getMonth()+1)).slice(-2),r=("0"+s.getDate()).slice(-2);return`${s.getFullYear()}-${o}-${r}`}updateJobOrder(){if(this.form.invalid)return void this.form.markAllAsTouched();const t=this.form.getRawValue(),s={Id:t.Id,JobOrderNo:t.SeriesNumber,series:t.SeriesCode+t.Separator,CustomerId:t.CustomerId,QuotationNo:t.QuotationNo,QuotationId:t.QuotationId,LocationId:t.LocationId,ProjectId:t.ProjectId,JobOrderTypeServicesTypeId:t.JobOrderTypeServicesTypeId,InspectionMethodId:t.InspectionMethodId,ServiceList:t.ServiceList,InspectorCategoryId:t.InspectorCategoryId,AssignedTo:t.AssignedTo,SiteContactName:t.SiteContactName,SiteContactMobile:t.SiteContactMobile,SiteContactEmail:t.SiteContactEmail,Description:t.Description,Comments:t.Comments,DateFrom:new Date(t.DateFrom).toISOString(),DateTo:new Date(t.DateTo).toISOString()};this._JobOrderService.updateJobOrder(t.Id,s).pipe((0,n.pQ)(this._destroyRef)).subscribe({next:()=>{this._toastr.success("Job Order Updated Successfully"),this._router.navigate(["/sales/job-order"])},error:o=>{this._toastr.error(o.error?.title||o.message)}})}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}getCustomerList(){this._customerService.getCustomerLookUp().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.customerList=t,error:t=>this.errorMessage=t.message})}getLocationList(){this._locationService.getLocationLookUp().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.LocationList=t,error:t=>this.errorMessage=t.message})}getProjectList(){this._projectService.getProjectLookUp().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.ProjectList=t,error:t=>this.errorMessage=t.message})}getservTypeList(){this._serviceType.serviceTypeLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.servTypeList=t,error:t=>this.errorMessage=t.message})}getInspectionMethodList(){this._InspectionMethodeService.getInspectionMethodLookUP().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.inspectionList=t,error:t=>this.errorMessage=t.message})}getInspectorCategoryList(){this._inspectorcateg.InspectorCategoryLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.inspectorCategList=t,error:t=>this.errorMessage=t.message})}getQuotationList(){this._Quotation.salesQuotationLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>this.quotationList=t.map(s=>({QuotationId:s.Id,QuotationNo:s.QuotationNumber})),error:t=>this.errorMessage=t.message})}getInspectorList(t){this._inspectorService.getInspectorLookUP(t).pipe((0,n.pQ)(this._destroyRef)).subscribe({next:s=>{this.filteredInspectorList=s,this.cdr.detectChanges()},error:s=>this.errorMessage=s.message})}static \u0275fac=function(s){return new(s||i)(e.rXU(g.tw),e.rXU(e.abz),e.rXU(u.Ix),e.rXU(I.c$),e.rXU($),e.rXU(y.v),e.rXU(C.N),e.rXU(B.T),e.rXU(X.H),e.rXU(V.t),e.rXU(G.V),e.rXU(Y.j),e.rXU(u.nX),e.rXU(F),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:i,selectors:[["app-job-order-edit"]],decls:100,vars:134,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center","mb-3"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3"],[1,"container-fluid","mx-4"],[1,"row"],[1,"col-md-4","mb-5"],["for","JobOrderNo",1,"mb-2","d-block"],["pInputText","","type","text","id","JobOrderNo","formControlName","JobOrderNo","readonly","",1,"w-100","mb-2"],["for","QuotationNo",1,"mb-2","d-block"],["formControlName","QuotationNo",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["severity","error","class","text-danger","size","small","variant","simple",4,"ngIf"],["for","InspectorCategoryId",1,"mb-2","d-block"],["formControlName","InspectorCategoryId",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","AssignedTo",1,"mb-2","d-block"],["formControlName","AssignedTo",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","CustomerId",1,"mb-2","d-block"],["formControlName","CustomerId",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","LocationId",1,"mb-2","d-block"],["formControlName","LocationId",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","ProjectId",1,"mb-2","d-block"],["formControlName","ProjectId",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","JobOrderTypeServicesTypeId",1,"mb-2","d-block"],["formControlName","JobOrderTypeServicesTypeId",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","InspectionMethodId",1,"mb-2","d-block"],["formControlName","InspectionMethodId",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","ServiceList",1,"mb-2","d-block"],["pInputText","","type","text","id","ServiceList","formControlName","ServiceList",1,"w-100","mb-2"],["for","SiteContactName",1,"mb-2","d-block"],["pInputText","","type","text","id","SiteContactName","formControlName","SiteContactName",1,"w-100","mb-2"],["for","SiteContactMobile",1,"mb-2","d-block"],["pInputText","","type","text","id","SiteContactMobile","formControlName","SiteContactMobile",1,"w-100","mb-2"],["for","SiteContactEmail",1,"mb-2","d-block"],["pInputText","","type","email","id","SiteContactEmail","formControlName","SiteContactEmail",1,"w-100","mb-2"],["for","DateFrom",1,"mb-2","d-block"],["pInputText","","type","date","id","DateFrom","formControlName","DateFrom",1,"w-100","mb-2"],["for","DateTo",1,"mb-2","d-block"],["pInputText","","type","date","id","DateTo","formControlName","DateTo",1,"w-100","mb-2"],[1,"col-md-12","mb-5"],["for","Description",1,"mb-2","d-block"],["pInputText","","id","Description","formControlName","Description","rows","4","autoResize","true","placeholder","Enter Description...",1,"w-100","mb-2"],["for","Comments",1,"mb-2","d-block"],["pInputText","","id","Comments","formControlName","Comments","rows","4","autoResize","true","placeholder","Enter comments...",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.updateJobOrder()}),e.j41(1,"div",1)(2,"app-submit-btns",2),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(3,"div",3),e.nrm(4,"app-breadcrump"),e.j41(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.nrm(11,"input",8),e.k0s(),e.j41(12,"div",6)(13,"label",9),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.nrm(16,"app-auto-complete",10),e.DNE(17,Se,3,3,"p-message",11),e.k0s(),e.j41(18,"div",6)(19,"label",12),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.nrm(22,"app-auto-complete",13),e.DNE(23,fe,3,3,"p-message",11),e.k0s(),e.j41(24,"div",6)(25,"label",14),e.EFF(26),e.nI1(27,"translate"),e.k0s(),e.nrm(28,"app-auto-complete",15),e.DNE(29,ge,3,3,"p-message",11),e.k0s(),e.j41(30,"div",6)(31,"label",16),e.EFF(32),e.nI1(33,"translate"),e.k0s(),e.nrm(34,"app-auto-complete",17),e.DNE(35,Ce,3,3,"p-message",11),e.k0s(),e.j41(36,"div",6)(37,"label",18),e.EFF(38),e.nI1(39,"translate"),e.k0s(),e.nrm(40,"app-auto-complete",19),e.DNE(41,ke,3,3,"p-message",11),e.k0s(),e.j41(42,"div",6)(43,"label",20),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.nrm(46,"app-auto-complete",21),e.DNE(47,ye,3,3,"p-message",11),e.k0s(),e.j41(48,"div",6)(49,"label",22),e.EFF(50),e.nI1(51,"translate"),e.k0s(),e.nrm(52,"app-auto-complete",23),e.DNE(53,Fe,3,3,"p-message",11),e.k0s(),e.j41(54,"div",6)(55,"label",24),e.EFF(56),e.nI1(57,"translate"),e.k0s(),e.nrm(58,"app-auto-complete",25),e.k0s(),e.j41(59,"div",6)(60,"label",26),e.EFF(61),e.nI1(62,"translate"),e.k0s(),e.nrm(63,"input",27),e.DNE(64,Te,3,3,"p-message",11),e.k0s(),e.j41(65,"div",6)(66,"label",28),e.EFF(67),e.nI1(68,"translate"),e.k0s(),e.nrm(69,"input",29),e.k0s(),e.j41(70,"div",6)(71,"label",30),e.EFF(72),e.nI1(73,"translate"),e.k0s(),e.nrm(74,"input",31),e.k0s(),e.j41(75,"div",6)(76,"label",32),e.EFF(77),e.nI1(78,"translate"),e.k0s(),e.nrm(79,"input",33),e.k0s(),e.j41(80,"div",6)(81,"label",34),e.EFF(82),e.nI1(83,"translate"),e.k0s(),e.nrm(84,"input",35),e.k0s(),e.j41(85,"div",6)(86,"label",36),e.EFF(87),e.nI1(88,"translate"),e.k0s(),e.nrm(89,"input",37),e.k0s(),e.j41(90,"div",38)(91,"label",39),e.EFF(92),e.nI1(93,"translate"),e.k0s(),e.nrm(94,"textarea",40),e.k0s(),e.j41(95,"div",38)(96,"label",41),e.EFF(97),e.nI1(98,"translate"),e.k0s(),e.nrm(99,"textarea",42),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(7),e.JRh(e.bMT(10,84,"Job Order Number")),e.R7$(5),e.JRh(e.bMT(15,86,"Quotation Number")),e.R7$(2),e.Y8G("data",o.quotationList)("displayField",e.lJ4(118,K))("searchFields",e.lJ4(119,K))("valueField","QuotationNo")("lookupData",o.quotationList)("readonly",!1)("validStyle",o.isInvalid("QuotationNo")?"ng-invalid":""),e.R7$(),e.Y8G("ngIf",o.isInvalid("QuotationNo")),e.R7$(3),e.JRh(e.bMT(21,88,"Inspector Category")),e.R7$(2),e.Y8G("data",o.inspectorCategList)("displayField",e.lJ4(120,h))("searchFields",e.lJ4(121,h))("valueField","Id")("lookupData",o.inspectorCategList)("readonly",!1)("validStyle",o.isInvalid("InspectorCategoryId")?"ng-invalid":""),e.R7$(),e.Y8G("ngIf",o.isInvalid("InspectorCategoryId")),e.R7$(3),e.JRh(e.bMT(27,90,"Assigned To")),e.R7$(2),e.Y8G("data",o.filteredInspectorList)("displayField",e.lJ4(122,h))("searchFields",e.lJ4(123,h))("valueField","Id")("lookupData",o.filteredInspectorList)("readonly",!1)("validStyle",o.isInvalid("AssignedTo")?"ng-invalid":""),e.R7$(),e.Y8G("ngIf",o.isInvalid("AssignedTo")),e.R7$(3),e.JRh(e.bMT(33,92,"Customer Name")),e.R7$(2),e.Y8G("data",o.customerList)("displayField",e.lJ4(124,Z))("searchFields",e.lJ4(125,Z))("valueField","Id")("lookupData",o.customerList)("readonly",!1)("validStyle",o.isInvalid("CustomerId")?"ng-invalid":""),e.R7$(),e.Y8G("ngIf",o.isInvalid("CustomerId")),e.R7$(3),e.JRh(e.bMT(39,94,"Location")),e.R7$(2),e.Y8G("data",o.LocationList)("displayField",e.lJ4(126,h))("searchFields",e.lJ4(127,h))("valueField","Id")("lookupData",o.LocationList)("readonly",!1)("validStyle",o.isInvalid("LocationId")?"ng-invalid":""),e.R7$(),e.Y8G("ngIf",o.isInvalid("LocationId")),e.R7$(3),e.JRh(e.bMT(45,96,"Project")),e.R7$(2),e.Y8G("data",o.ProjectList)("displayField",e.lJ4(128,h))("searchFields",e.lJ4(129,h))("valueField","Id")("lookupData",o.ProjectList)("readonly",!1)("validStyle",o.isInvalid("ProjectId")?"ng-invalid":""),e.R7$(),e.Y8G("ngIf",o.isInvalid("ProjectId")),e.R7$(3),e.JRh(e.bMT(51,98,"Job Order Type")),e.R7$(2),e.Y8G("data",o.servTypeList)("displayField",e.lJ4(130,h))("searchFields",e.lJ4(131,h))("valueField","Id")("lookupData",o.servTypeList)("readonly",!1)("validStyle",o.isInvalid("JobOrderTypeServicesTypeId")?"ng-invalid":""),e.R7$(),e.Y8G("ngIf",o.isInvalid("JobOrderTypeServicesTypeId")),e.R7$(3),e.JRh(e.bMT(57,100,"Inspection Method")),e.R7$(2),e.Y8G("data",o.inspectionList)("displayField",e.lJ4(132,h))("searchFields",e.lJ4(133,h))("valueField","Id")("lookupData",o.inspectionList)("readonly",!1)("validStyle",o.isInvalid("InspectionMethodId")?"ng-invalid":""),e.R7$(3),e.JRh(e.bMT(62,102,"Service List")),e.R7$(3),e.Y8G("ngIf",o.isInvalid("ServiceList")),e.R7$(3),e.JRh(e.bMT(68,104,"Site Contact Name")),e.R7$(5),e.JRh(e.bMT(73,106,"Site Contact Mobile")),e.R7$(5),e.JRh(e.bMT(78,108,"Site Contact Email")),e.R7$(5),e.JRh(e.bMT(83,110,"Date From")),e.R7$(5),e.JRh(e.bMT(88,112,"Date To")),e.R7$(5),e.JRh(e.bMT(93,114,"Description")),e.R7$(5),e.JRh(e.bMT(98,116,"Comments")))},dependencies:[k.bT,J.R,a.qT,a.me,a.BC,a.cb,L.V,a.j4,a.JD,D.S,E.QB,w.Sm,I.D9]})}return i})();var O=m(3281);let Ne=(()=>{class i{_toastr;_salesQuotationService;cd;_router;_activateRoute;_seriesService;_locationService;dataSource=[];selectedRow=[];LocationList;seriesData;columnsSchema=[{key:"FinelSeriesCodeAndSeriesNumber",label:"Quotationno"},{key:"CustomerName",label:"CustomerName"},{key:"LocationName",label:"LocationName"},{key:"ContactName",label:"ContactName"},{key:"IssueDate",label:"IssueDate"},{key:"ExpireDate",label:"ExpireDate"},{key:"ReferenceNumber",label:"ReferrenceNumber"},{key:"PONumber",label:"PONo"},{key:"SalespersonId",label:"SalesPerson"},{key:"VersionNumber",label:"VersionNumber"},{key:"CheckedBy",label:"CheckedBy"},{key:"BranchName",label:"BranchName"},{key:"AreaName",label:"AreaName"},{key:"SubTotal",label:"Sub Total"},{key:"Discount",label:"Discount"},{key:"TaxValue",label:"TaxValue"},{key:"TotalAmount",label:"TotalAmount"},{key:"CustomerNote",label:"CustomerNote"},{key:"TermsAndConditions",label:"Terms&Conditions"},{key:"Status",label:"Status",formatter:(t,s)=>this.formatStatus(t)}];dataList;constructor(t,s,o,r,d,c,p){this._toastr=t,this._salesQuotationService=s,this.cd=o,this._router=r,this._activateRoute=d,this._seriesService=c,this._locationService=p}ngOnInit(){this.salesQuotationList()}salesQuotationList(){this._salesQuotationService.getSalesQuotationList().subscribe({next:t=>{this.dataSource=t.map(s=>({...s,FinelSeriesCodeAndSeriesNumber:`${s.series}${s.QuotationNumber}`})),this.cd.detectChanges()},error:t=>{console.error("Error getting Method data",t)}})}navigateToEdit(t){t?.Id&&this._router.navigate(["edit",t.Id],{relativeTo:this._activateRoute})}onSelectedRows(t){this.selectedRow=t}deleteSelected(t){const s=t.map(o=>this._salesQuotationService.deleteSalesQuotation(o.Id));(0,A.p)(s).pipe((0,q.j)(()=>this.salesQuotationList())).subscribe({next:()=>{this._toastr.success("Sales Quotation deleted successfully"),this.selectedRow=[],this.dataList.clearSelection(),this.cd.detectChanges()},error:o=>{this._toastr.error("Error deleting Sales Quotation")}})}formatStatus(t){const s=this.getStatusLabel(t);return`<span class="badge ${this.getStatusBadgeClass(t)}" style="font-size: 0.9rem;">${s}</span>`}getStatusBadgeClass(t){switch(t){case 0:return"bg-warning text-dark";case 1:return"badge bg-success text-white";case 2:return"badge bg-danger text-white";case 3:return"badge bg-secondary text-white";default:return"bg-light text-white"}}getStatusLabel(t){switch(t){case 0:return"Pending";case 1:return"Approved";case 2:return"Rejected";case 3:return"Cancelled";default:return"Unknown"}}static \u0275fac=function(s){return new(s||i)(e.rXU(g.tw),e.rXU(F),e.rXU(e.gRc),e.rXU(u.Ix),e.rXU(u.nX),e.rXU(O.x),e.rXU(C.N))};static \u0275cmp=e.VBU({type:i,selectors:[["app-sales-quotation-list"]],viewQuery:function(s,o){if(1&s&&e.GBs(M.q,5),2&s){let r;e.mGM(r=e.lsd())&&(o.dataList=r.first)}},decls:2,vars:2,consts:[[3,"selectedRows","rowClick","onDelete","dataSource","columnsSchema"]],template:function(s,o){1&s&&(e.j41(0,"app-data-list",0),e.bIt("selectedRows",function(d){return o.onSelectedRows(d)})("rowClick",function(d){return o.navigateToEdit(d)})("onDelete",function(d){return o.deleteSelected(d)}),e.k0s(),e.nrm(1,"router-outlet")),2&s&&e.Y8G("dataSource",o.dataSource)("columnsSchema",o.columnsSchema)},dependencies:[u.n3,M.q]})}return i})();var W=m(5759),ee=m(225),te=m(4671),oe=m(4999);const ae=()=>["Id","EnName","ArName"],Q=()=>["Id","Name"],se=()=>["Id","NameEn","NameAr"],ie=()=>["Id","Itemtitle"];function Re(i,l){1&i&&(e.j41(0,"p-message",8),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"QuotationNumber is required")," "))}function Me(i,l){1&i&&(e.j41(0,"p-message",8),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Customer is required")," "))}function Je(i,l){1&i&&(e.j41(0,"p-message",8),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Location is required")," "))}function Le(i,l){1&i&&(e.j41(0,"p-message",8),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ContactName is required")," "))}function De(i,l){1&i&&(e.j41(0,"p-message",8),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"IssueDate is required")," "))}function Ee(i,l){1&i&&(e.j41(0,"p-message",8),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ExpireDate is required")," "))}function we(i,l){1&i&&(e.j41(0,"p-message",8),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Branch is required")," "))}function Qe(i,l){1&i&&(e.j41(0,"p-message",8),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Area is required")," "))}function je(i,l){1&i&&(e.j41(0,"p-message",8),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Item is required")," "))}function $e(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",49)(1,"td"),e.nrm(2,"app-auto-complete",50),e.DNE(3,je,3,3,"p-message",8),e.k0s(),e.j41(4,"td"),e.nrm(5,"input",51),e.k0s(),e.j41(6,"td"),e.nrm(7,"input",52),e.k0s(),e.j41(8,"td"),e.nrm(9,"input",53),e.k0s(),e.j41(10,"td"),e.nrm(11,"input",54),e.k0s(),e.j41(12,"td"),e.nrm(13,"input",55),e.k0s(),e.j41(14,"td")(15,"i",56),e.bIt("click",function(){const o=e.eBV(t).index,r=e.XpG();return e.Njj(r.removeItem(o))}),e.k0s()()()}if(2&i){const t=l.index,s=e.XpG();e.Y8G("formGroupName",t),e.R7$(2),e.Y8G("data",s.serviceItemList)("displayField",e.lJ4(9,ie))("searchFields",e.lJ4(10,ie))("valueField","Id")("lookupData",s.serviceItemList)("readonly",!1)("validStyle",s.isInvalid("itemid")?"ng-invalid":""),e.R7$(),e.vxM(s.isInvalid("itemid")?3:-1)}}const re=()=>["Id","EnName","ArName"],j=()=>["Id","Name"],ne=()=>["Id","NameEn","NameAr"],le=()=>["Id","Itemtitle"];function xe(i,l){1&i&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"QuotationNumber is required")," "))}function Ae(i,l){1&i&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Customer is required")," "))}function qe(i,l){1&i&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Location is required")," "))}function Ue(i,l){1&i&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ContactName is required")," "))}function Pe(i,l){1&i&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"IssueDate is required")," "))}function Be(i,l){1&i&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ExpireDate is required")," "))}function Xe(i,l){1&i&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Branch is required")," "))}function Ve(i,l){1&i&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Area is required")," "))}function Ge(i,l){1&i&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Item is required")," "))}function Ye(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",50)(1,"td"),e.nrm(2,"app-auto-complete",51),e.DNE(3,Ge,3,3,"p-message",9),e.k0s(),e.j41(4,"td"),e.nrm(5,"input",52),e.k0s(),e.j41(6,"td"),e.nrm(7,"input",53),e.k0s(),e.j41(8,"td"),e.nrm(9,"input",54),e.k0s(),e.j41(10,"td"),e.nrm(11,"input",55),e.k0s(),e.j41(12,"td"),e.nrm(13,"input",56),e.k0s(),e.j41(14,"td")(15,"i",57),e.bIt("click",function(){const o=e.eBV(t).index,r=e.XpG();return e.Njj(r.removeItem(o))}),e.k0s()()()}if(2&i){const t=l.index,s=e.XpG();e.Y8G("formGroupName",t),e.R7$(2),e.Y8G("data",s.serviceItemList)("displayField",e.lJ4(9,le))("searchFields",e.lJ4(10,le))("valueField","Id")("lookupData",s.serviceItemList)("readonly",!1)("validStyle",s.isInvalid("itemid")?"ng-invalid":""),e.R7$(),e.vxM(s.isInvalid("itemid")?3:-1)}}const ze=[{path:"job-order",component:de},{path:"job-order/add",component:ve},{path:"job-order/edit/:id",component:_e},{path:"sales-quotation",component:Ne},{path:"sales-quotation/add",component:(()=>{class i{_salesQuotationService;_locationService;_toastr;_destroyRef;translat;_customerService;_branchService;_areaService;_serviceItemService;_seriesService;data;salesItems=[];errorMessage="";customerList;locationList;branchList;areaList;serviceItemList;form=new a.gE({QuotationNumber:new a.MJ({value:"0",disabled:!0},[a.k0.required]),CustomerId:new a.MJ(null,[a.k0.required]),LocationId:new a.MJ(null,[a.k0.required]),ContactName:new a.MJ("",[a.k0.required]),IssueDate:new a.MJ(new Date,[a.k0.required]),ExpireDate:new a.MJ(new Date,[a.k0.required]),ReferenceNumber:new a.MJ(""),PONumber:new a.MJ(""),SalespersonId:new a.MJ({value:0,disabled:!0}),VersionNumber:new a.MJ(""),CheckedBy:new a.MJ(""),BranchId:new a.MJ(null,[a.k0.required]),AreaId:new a.MJ(null,[a.k0.required]),SubTotal:new a.MJ(0),Discount:new a.MJ(0),TaxValue:new a.MJ(0),TotalAmount:new a.MJ({value:0,disabled:!0}),CustomerNote:new a.MJ(""),TermsAndConditions:new a.MJ(""),Status:new a.MJ(0),series:new a.MJ(""),SalesQuotationItems:new a.Yp([]),SeriesNumber:new a.MJ("",a.k0.required),SeriesCode:new a.MJ("",a.k0.required),Separator:new a.MJ("",a.k0.required)});constructor(t,s,o,r,d,c,p,v,S,f){this._salesQuotationService=t,this._locationService=s,this._toastr=o,this._destroyRef=r,this.translat=d,this._customerService=c,this._branchService=p,this._areaService=v,this._serviceItemService=S,this._seriesService=f}ngOnInit(){this.form.valueChanges.pipe((0,n.pQ)(this._destroyRef)).subscribe(()=>this.calculateTotal()),this.getLocationList(),this.getCustomerList(),this.getBranchList(),this.getAreaList(),this.getServiceItemList(),this.getSeriesData()}getLocationList(){this._locationService.getLocationLookUp().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.locationList=t},error:t=>{this.errorMessage=t.message}})}getCustomerList(){this._customerService.getCustomerLookUp().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.customerList=t},error:t=>{this.errorMessage=t.message}})}getBranchList(){this._branchService.getBranchLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.branchList=t},error:t=>{this.errorMessage=t.message}})}getAreaList(){this._areaService.getAreaLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.areaList=t},error:t=>{this.errorMessage=t.message}})}getServiceItemList(){this._serviceItemService.getServiceItemLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.serviceItemList=t},error:t=>{this.errorMessage=t.message}})}createQuotation(){if(this.form.valid){const t=this.form.getRawValue(),s={QuotationNumber:t.SeriesNumber,CustomerId:t.CustomerId,LocationId:t.LocationId,ContactName:t.ContactName,IssueDate:t.IssueDate?new Date(t.IssueDate).toISOString():(new Date).toISOString(),ExpireDate:t.ExpireDate?new Date(t.ExpireDate).toISOString():(new Date).toISOString(),ReferenceNumber:t.ReferenceNumber,PONumber:t.PONumber,SalespersonId:t.SalespersonId,VersionNumber:t.VersionNumber,CheckedBy:t.CheckedBy,BranchId:t.BranchId,AreaId:t.AreaId,SubTotal:t.SubTotal,Discount:t.Discount,TaxValue:t.TaxValue,TotalAmount:t.TotalAmount,CustomerNote:t.CustomerNote,TermsAndConditions:t.TermsAndConditions,Status:t.Status,series:t.SeriesCode+t.Separator,SalesQuotationItems:this.items.controls.map(o=>({itemid:o.get("itemid")?.value,price:o.get("price")?.value,qty:o.get("qty")?.value,tax:o.get("tax")?.value,total:o.get("total")?.value,description:o.get("description")?.value}))};this._salesQuotationService.createSalesQuotation(s).pipe((0,n.pQ)(this._destroyRef)).subscribe({next:o=>{this.data=o,this.form.reset(),this.form.get("SalesQuotationItems").clear(),this._toastr.success(this.translat.instant("Sales Quotation created successfully"))},error:o=>{this.errorMessage=o.message,this._toastr.error(this.translat.instant("Failed to create Sales Quotation"+this.errorMessage))}})}}get items(){return this.form.get("SalesQuotationItems")}addItem(){const t=new a.gE({itemid:new a.MJ(null,a.k0.required),price:new a.MJ(0,a.k0.required),qty:new a.MJ(0,a.k0.required),tax:new a.MJ(0),total:new a.MJ(0),description:new a.MJ("")});t.valueChanges.subscribe(s=>{const o=(s.price||0)*(s.qty||0),d=o+o*((s.tax||0)/100);t.get("total")?.setValue(d,{emitEvent:!1})}),this.items.push(t)}removeItem(t){this.items.removeAt(t)}calculateTotal(){const r=(Number(this.form.get("SubTotal")?.value)||0)-(Number(this.form.get("Discount")?.value)||0),c=r+r*((Number(this.form.get("TaxValue")?.value)||0)/100);this.form.get("TotalAmount")?.setValue(Number(c.toFixed(2)),{emitEvent:!1})}getSeriesData(){this._seriesService.getSeriesInfoForTables("SalesQuotations","QuotationNumber","Sales Quotataion").pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.form.patchValue({QuotationNumber:t.FinelSeriesCodeAndSeriesNumber,SeriesNumber:t.SeriesNumber,SeriesCode:t.SeriesCode,Separator:t.Separator})},error:t=>console.error("Series API Error:",t)})}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}static \u0275fac=function(s){return new(s||i)(e.rXU(F),e.rXU(C.N),e.rXU(g.tw),e.rXU(e.abz),e.rXU(I.c$),e.rXU(y.v),e.rXU(W.O),e.rXU(ee.x),e.rXU(te.Q),e.rXU(O.x))};static \u0275cmp=e.VBU({type:i,selectors:[["app-sales-quotation-add"]],decls:130,vars:122,consts:[[3,"ngSubmit","formGroup"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3","mt-3"],[1,"container-fluid","mx-4"],[1,"row"],[1,"col-md-4","mb-5"],["for","QuotationNumber",1,"mb-2","d-block"],["pInputText","","type","text","id","QuotationNumber","formControlName","QuotationNumber",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","CustomerList",1,"mb-2","d-block"],["formControlName","CustomerId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","LocationList",1,"mb-2","d-block"],["formControlName","LocationId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","ContactName",1,"mb-2","d-block"],["pInputText","","type","text","id","ContactName","formControlName","ContactName",1,"w-100","mb-2"],["for","IssueDate",1,"mb-2","d-block"],["id","IssueDate","formControlName","IssueDate",1,"w-100","mb-2",3,"showIcon"],["for","ExpireDate",1,"mb-2","d-block"],["id","ExpireDate","formControlName","ExpireDate",1,"w-100","mb-2",3,"showIcon"],[1,"col-md-3","mb-5"],["for","ReferenceNumber",1,"mb-2","d-block"],["pInputText","","type","text","id","ReferenceNumber","formControlName","ReferenceNumber",1,"w-100","mb-2"],["for","PONumber",1,"mb-2","d-block"],["pInputText","","type","text","id","PONumber","formControlName","PONumber",1,"w-100","mb-2"],["for","SalespersonId",1,"mb-2","d-block"],["pInputText","","type","text","id","SalespersonId","formControlName","SalespersonId",1,"w-100","mb-2"],["for","VersionNumber",1,"mb-2","d-block"],["pInputText","","type","text","id","VersionNumber","formControlName","VersionNumber",1,"w-100","mb-2"],["for","CheckedBy",1,"mb-2","d-block"],["pInputText","","type","text","id","CheckedBy","formControlName","CheckedBy",1,"w-100","mb-2"],["for","branchList",1,"mb-2","d-block"],["formControlName","BranchId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","areaList",1,"mb-2","d-block"],["formControlName","AreaId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],[1,"details","mb-5"],[1,"fw-bold","mb-3"],[1,"table","table-responsive","table-input","w-100"],["formArrayName","SalesQuotationItems"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"addItem","mt-3"],[1,"fa-solid","fa-plus",3,"click"],["for","SubTotal",1,"mb-2","d-block"],["pInputText","","type","text","id","SubTotal","formControlName","SubTotal",1,"w-100","mb-2"],["for","Discount",1,"mb-2","d-block"],["pInputText","","type","text","id","Discount","formControlName","Discount",1,"w-100","mb-2"],["for","TaxValue",1,"mb-2","d-block"],["pInputText","","type","text","id","TaxValue","formControlName","TaxValue",1,"w-100","mb-2"],["for","TotalAmount",1,"mb-2","d-block"],["pInputText","","type","text","id","TotalAmount","formControlName","TotalAmount",1,"w-100","mb-2"],[3,"formGroupName"],["placeholder","","formControlName","itemid",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["pInputText","","formControlName","price"],["pInputText","","formControlName","qty"],["pInputText","","formControlName","tax"],["pInputText","","formControlName","total","readonly","",2,"background-color","#E2E8F0"],["pInputText","","formControlName","description"],[1,"fa-solid","fa-trash-can",2,"color","red","cursor","pointer",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.createQuotation()}),e.j41(1,"app-submit-btns",1),e.bIt("reset",function(){return o.form.reset()}),e.k0s(),e.j41(2,"div",2),e.nrm(3,"app-breadcrump"),e.j41(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.nrm(10,"input",7),e.DNE(11,Re,3,3,"p-message",8),e.k0s(),e.j41(12,"div",5)(13,"label",9),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.nrm(16,"app-auto-complete",10),e.DNE(17,Me,3,3,"p-message",8),e.k0s(),e.j41(18,"div",5)(19,"label",11),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.nrm(22,"app-auto-complete",12),e.DNE(23,Je,3,3,"p-message",8),e.k0s(),e.j41(24,"div",5)(25,"label",13),e.EFF(26),e.nI1(27,"translate"),e.k0s(),e.nrm(28,"input",14),e.DNE(29,Le,3,3,"p-message",8),e.k0s(),e.j41(30,"div",5)(31,"label",15),e.EFF(32),e.nI1(33,"translate"),e.k0s(),e.nrm(34,"p-datePicker",16),e.DNE(35,De,3,3,"p-message",8),e.k0s(),e.j41(36,"div",5)(37,"label",17),e.EFF(38),e.nI1(39,"translate"),e.k0s(),e.nrm(40,"p-datePicker",18),e.DNE(41,Ee,3,3,"p-message",8),e.k0s(),e.j41(42,"div",19)(43,"label",20),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.nrm(46,"input",21),e.k0s(),e.j41(47,"div",19)(48,"label",22),e.EFF(49),e.nI1(50,"translate"),e.k0s(),e.nrm(51,"input",23),e.k0s(),e.j41(52,"div",19)(53,"label",24),e.EFF(54),e.nI1(55,"translate"),e.k0s(),e.nrm(56,"input",25),e.k0s(),e.j41(57,"div",19)(58,"label",26),e.EFF(59),e.nI1(60,"translate"),e.k0s(),e.nrm(61,"input",27),e.k0s(),e.j41(62,"div",5)(63,"label",28),e.EFF(64),e.nI1(65,"translate"),e.k0s(),e.nrm(66,"input",29),e.k0s(),e.j41(67,"div",5)(68,"label",30),e.EFF(69),e.nI1(70,"translate"),e.k0s(),e.nrm(71,"app-auto-complete",31),e.DNE(72,we,3,3,"p-message",8),e.k0s(),e.j41(73,"div",5)(74,"label",32),e.EFF(75),e.nI1(76,"translate"),e.k0s(),e.nrm(77,"app-auto-complete",33),e.DNE(78,Qe,3,3,"p-message",8),e.k0s(),e.j41(79,"div",34)(80,"h5",35),e.EFF(81),e.nI1(82,"translate"),e.k0s(),e.j41(83,"table",36)(84,"thead")(85,"tr")(86,"th"),e.EFF(87),e.nI1(88,"translate"),e.k0s(),e.j41(89,"th"),e.EFF(90),e.nI1(91,"translate"),e.k0s(),e.j41(92,"th"),e.EFF(93),e.nI1(94,"translate"),e.k0s(),e.j41(95,"th"),e.EFF(96),e.nI1(97,"translate"),e.k0s(),e.j41(98,"th"),e.EFF(99),e.nI1(100,"translate"),e.k0s(),e.j41(101,"th"),e.EFF(102),e.nI1(103,"translate"),e.k0s(),e.nrm(104,"th"),e.k0s()(),e.j41(105,"tbody",37),e.DNE(106,$e,16,11,"tr",38),e.k0s()(),e.j41(107,"a",39)(108,"i",40),e.bIt("click",function(){return o.addItem()}),e.k0s()()(),e.nrm(109,"hr"),e.j41(110,"div",19)(111,"label",41),e.EFF(112),e.nI1(113,"translate"),e.k0s(),e.nrm(114,"input",42),e.k0s(),e.j41(115,"div",19)(116,"label",43),e.EFF(117),e.nI1(118,"translate"),e.k0s(),e.nrm(119,"input",44),e.k0s(),e.j41(120,"div",19)(121,"label",45),e.EFF(122),e.nI1(123,"translate"),e.k0s(),e.nrm(124,"input",46),e.k0s(),e.j41(125,"div",19)(126,"label",47),e.EFF(127),e.nI1(128,"translate"),e.k0s(),e.nrm(129,"input",48),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(7),e.JRh(e.bMT(9,66,"QuotationNumber")),e.R7$(3),e.vxM(o.isInvalid("QuotationNumber")?11:-1),e.R7$(3),e.JRh(e.bMT(15,68,"CustomerName")),e.R7$(2),e.Y8G("data",o.customerList)("displayField",e.lJ4(114,ae))("searchFields",e.lJ4(115,ae))("valueField","Id")("lookupData",o.customerList)("readonly",!1)("validStyle",o.isInvalid("CustomerId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CustomerId")?17:-1),e.R7$(3),e.JRh(e.bMT(21,70,"LocationName")),e.R7$(2),e.Y8G("data",o.locationList)("displayField",e.lJ4(116,Q))("searchFields",e.lJ4(117,Q))("valueField","Id")("lookupData",o.locationList)("readonly",!1)("validStyle",o.isInvalid("LocationId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("LocationId")?23:-1),e.R7$(3),e.JRh(e.bMT(27,72,"ContactName")),e.R7$(3),e.vxM(o.isInvalid("ContactName")?29:-1),e.R7$(3),e.JRh(e.bMT(33,74,"IssueDate")),e.R7$(2),e.Y8G("showIcon",!0),e.R7$(),e.vxM(o.isInvalid("IssueDate")?35:-1),e.R7$(3),e.JRh(e.bMT(39,76,"ExpireDate")),e.R7$(2),e.Y8G("showIcon",!0),e.R7$(),e.vxM(o.isInvalid("ExpireDate")?41:-1),e.R7$(3),e.JRh(e.bMT(45,78,"ReferenceNumber")),e.R7$(5),e.JRh(e.bMT(50,80,"PONumber")),e.R7$(5),e.JRh(e.bMT(55,82,"SalespersonId")),e.R7$(5),e.JRh(e.bMT(60,84,"VersionNumber")),e.R7$(5),e.JRh(e.bMT(65,86,"CheckedBy")),e.R7$(5),e.JRh(e.bMT(70,88,"BranchName")),e.R7$(2),e.Y8G("data",o.branchList)("displayField",e.lJ4(118,se))("searchFields",e.lJ4(119,se))("valueField","Id")("lookupData",o.branchList)("readonly",!1)("validStyle",o.isInvalid("BranchId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("BranchId")?72:-1),e.R7$(3),e.JRh(e.bMT(76,90,"AreaName")),e.R7$(2),e.Y8G("data",o.areaList)("displayField",e.lJ4(120,Q))("searchFields",e.lJ4(121,Q))("valueField","Id")("lookupData",o.areaList)("readonly",!1)("validStyle",o.isInvalid("AreaId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("AreaId")?78:-1),e.R7$(3),e.JRh(e.bMT(82,92,"SalesQuotationItems")),e.R7$(6),e.JRh(e.bMT(88,94,"Item")),e.R7$(3),e.JRh(e.bMT(91,96,"Price")),e.R7$(3),e.JRh(e.bMT(94,98,"Quantity")),e.R7$(3),e.JRh(e.bMT(97,100,"Tax (%)")),e.R7$(3),e.JRh(e.bMT(100,102,"Total")),e.R7$(3),e.JRh(e.bMT(103,104,"Description")),e.R7$(4),e.Y8G("ngForOf",o.items.controls),e.R7$(6),e.JRh(e.bMT(113,106,"SubTotal")),e.R7$(5),e.JRh(e.bMT(118,108,"Discount")),e.R7$(5),e.JRh(e.bMT(123,110,"Tax (%)")),e.R7$(5),e.JRh(e.bMT(128,112,"TotalAmount")))},dependencies:[k.Sq,J.R,a.qT,a.me,a.BC,a.cb,L.V,a.j4,a.JD,a.$R,a.v8,D.S,E.QB,oe.lr,w.Sm,I.D9],styles:[".table-input[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #dee2e6;padding:0!important;vertical-align:middle}.table-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], [_nghost-%COMP%]     .table-input app-auto-complete input{border:none!important;width:100%;height:100%;padding:8px 10px;box-shadow:none;background:transparent;text-align:center}.table-input[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #dee2e6;background-color:#f8f9fa;font-weight:600;text-align:center}.addItem[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.addItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{border:1px solid #31D8CE;color:#31d8ce;font-size:1.5rem;width:2.7rem;height:2.7rem;border-radius:50%;text-align:center;line-height:2.7rem;cursor:pointer}"]})}return i})()},{path:"sales-quotation/edit/:id",component:(()=>{class i{_salesQuotationService;_locationService;_toastr;_destroyRef;translat;_customerService;_branchService;_areaService;cdr;_serviceItemService;_seriesService;_router;_activateRoute;_location;data;salesItems=[];errorMessage="";jobOrderId;seriesNumber;separator;customerList;locationList;branchList;areaList;serviceItemList;form=new a.gE({Id:new a.MJ(null),QuotationNumber:new a.MJ({value:"0",disabled:!0},[a.k0.required]),CustomerId:new a.MJ(null,[a.k0.required]),LocationId:new a.MJ(null,[a.k0.required]),BranchId:new a.MJ(null,[a.k0.required]),AreaId:new a.MJ(null,[a.k0.required]),ContactName:new a.MJ("",[a.k0.required]),IssueDate:new a.MJ(new Date,[a.k0.required]),ExpireDate:new a.MJ(new Date,[a.k0.required]),ReferenceNumber:new a.MJ(""),PONumber:new a.MJ(""),SalespersonId:new a.MJ({value:0,disabled:!0}),VersionNumber:new a.MJ(""),CheckedBy:new a.MJ(""),SubTotal:new a.MJ(0),Discount:new a.MJ(0),TaxValue:new a.MJ(0),TotalAmount:new a.MJ({value:0,disabled:!0}),CustomerNote:new a.MJ(""),TermsAndConditions:new a.MJ(""),Status:new a.MJ(0),series:new a.MJ(""),SalesQuotationItems:new a.Yp([]),SeriesNumber:new a.MJ("",a.k0.required),SeriesCode:new a.MJ("",a.k0.required),Separator:new a.MJ("",a.k0.required)});constructor(t,s,o,r,d,c,p,v,S,f,T,_,N,R){this._salesQuotationService=t,this._locationService=s,this._toastr=o,this._destroyRef=r,this.translat=d,this._customerService=c,this._branchService=p,this._areaService=v,this.cdr=S,this._serviceItemService=f,this._seriesService=T,this._router=_,this._activateRoute=N,this._location=R}ngOnInit(){this.form.valueChanges.pipe((0,n.pQ)(this._destroyRef)).subscribe(()=>{this.cdr.detectChanges()}),this.getLocationList(),this.getCustomerList(),this.getBranchList(),this.getAreaList(),this.getServiceItemList(),this.getSeriesData(),this.jobOrderId=Number(this._activateRoute.snapshot.paramMap.get("id")),this.jobOrderId&&this.quotationById(this.jobOrderId)}quotationById(t){this._salesQuotationService.getSalesQuotationById(t).pipe((0,n.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this.form.patchValue({Id:this.data.Id,QuotationNumber:this.data.series+this.data.QuotationNumber,CustomerId:this.data.CustomerId,LocationId:this.data.LocationId,ContactName:this.data.ContactName,IssueDate:this.data.IssueDate?new Date(this.data.IssueDate):new Date,ExpireDate:this.data.ExpireDate?new Date(this.data.ExpireDate):new Date,ReferenceNumber:this.data.ReferenceNumber,PONumber:this.data.PONumber,SalespersonId:this.data.SalespersonId,VersionNumber:this.data.VersionNumber,CheckedBy:this.data.CheckedBy,BranchId:this.data.BranchId,AreaId:this.data.AreaId,CustomerNote:this.data.CustomerNote,TermsAndConditions:this.data.TermsAndConditions,Status:this.data.Status,series:this.data.series}),this.form.get("SalesQuotationItems"),this.data.SalesQuotationItems&&this.data.SalesQuotationItems.length>0&&this.data.SalesQuotationItems.forEach(r=>{this.addItem(),this.items.at(this.items.length-1).patchValue({itemid:r.itemid,price:r.price,qty:r.qty,tax:r.tax,total:r.total,description:r.description||""})})},error:s=>{this.errorMessage=s.message,this._toastr.error("Failed to load quotation")}})}UpdateQuotation(){if(this.form.invalid)return void this.form.markAllAsTouched();const t=this.form.getRawValue(),s={Id:t.Id,QuotationNumber:t.SeriesNumber,CustomerId:t.CustomerId,LocationId:t.LocationId,ContactName:t.ContactName,IssueDate:t.IssueDate?new Date(t.IssueDate).toISOString():(new Date).toISOString(),ExpireDate:t.ExpireDate?new Date(t.ExpireDate).toISOString():(new Date).toISOString(),ReferenceNumber:t.ReferenceNumber,PONumber:t.PONumber,SalespersonId:t.SalespersonId,VersionNumber:t.VersionNumber,CheckedBy:t.CheckedBy,BranchId:t.BranchId,AreaId:t.AreaId,SubTotal:t.SubTotal,Discount:t.Discount,TaxValue:t.TaxValue,TotalAmount:t.TotalAmount,CustomerNote:t.CustomerNote,TermsAndConditions:t.TermsAndConditions,Status:t.Status,series:t.SeriesCode+t.Separator,SalesQuotationItems:this.items.controls.map(o=>({itemid:o.get("itemid")?.value,price:o.get("price")?.value,qty:o.get("qty")?.value,tax:o.get("tax")?.value,total:o.get("total")?.value,description:o.get("description")?.value}))};this._salesQuotationService.updateSalesQuotation(s.Id,s).pipe((0,n.pQ)(this._destroyRef)).subscribe({next:()=>{this._toastr.success("Sales Quotation Updated Successfully"),this.backAfterEdit()},error:o=>{this.errorMessage=o.message,this._toastr.success(this.translat.instant("Failed to update Sales Quotation"+this.errorMessage))}})}backAfterEdit(){const t=this._location.path(),s=t.indexOf("/sales-quotation");if(-1!==s){const o=t.substring(0,s+16);this._router.navigate([o])}else this._router.navigate(["/sales/sales-quotation"])}navigateToCreate(){this._router.navigate(["../../add"],{relativeTo:this._activateRoute})}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}getLocationList(){this._locationService.getLocationLookUp().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.locationList=t},error:t=>{this.errorMessage=t.message}})}getCustomerList(){this._customerService.getCustomerLookUp().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.customerList=t},error:t=>{this.errorMessage=t.message}})}getBranchList(){this._branchService.getBranchLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.branchList=t},error:t=>{this.errorMessage=t.message}})}getAreaList(){this._areaService.getAreaLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.areaList=t},error:t=>{this.errorMessage=t.message}})}getServiceItemList(){this._serviceItemService.getServiceItemLookup().pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.serviceItemList=t},error:t=>{this.errorMessage=t.message}})}get items(){return this.form.get("SalesQuotationItems")}addItem(){const t=new a.gE({itemid:new a.MJ(null,a.k0.required),price:new a.MJ(0,a.k0.required),qty:new a.MJ(0,a.k0.required),tax:new a.MJ(0),total:new a.MJ(0),description:new a.MJ("")});t.valueChanges.subscribe(s=>{const o=(s.price||0)*(s.qty||0),d=o+o*((s.tax||0)/100);t.get("total")?.setValue(d,{emitEvent:!1})}),this.items.push(t)}removeItem(t){this.items.removeAt(t)}calculateTotal(){const r=(Number(this.form.get("SubTotal")?.value)||0)-(Number(this.form.get("Discount")?.value)||0),c=r+r*((Number(this.form.get("TaxValue")?.value)||0)/100);this.form.get("TotalAmount")?.setValue(Number(c.toFixed(2)),{emitEvent:!1})}getSeriesData(){this._seriesService.getSeriesInfoForTables("SalesQuotations","QuotationNumber","Sales Quotataion").pipe((0,n.pQ)(this._destroyRef)).subscribe({next:t=>{this.form.patchValue({QuotationNumber:t.FinelSeriesCodeAndSeriesNumber,SeriesNumber:t.SeriesNumber,SeriesCode:t.SeriesCode,Separator:t.Separator})},error:t=>console.error("Series API Error:",t)})}static \u0275fac=function(s){return new(s||i)(e.rXU(F),e.rXU(C.N),e.rXU(g.tw),e.rXU(e.abz),e.rXU(I.c$),e.rXU(y.v),e.rXU(W.O),e.rXU(ee.x),e.rXU(e.gRc),e.rXU(te.Q),e.rXU(O.x),e.rXU(u.Ix),e.rXU(u.nX),e.rXU(k.aZ))};static \u0275cmp=e.VBU({type:i,selectors:[["app-sales-quotation-edit"]],decls:131,vars:122,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3"],[1,"container-fluid","mx-4"],[1,"row"],[1,"col-md-4","mb-5"],["for","QuotationNumber",1,"mb-2","d-block"],["pInputText","","type","text","id","QuotationNumber","formControlName","QuotationNumber",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","CustomerList",1,"mb-2","d-block"],["formControlName","CustomerId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","LocationList",1,"mb-2","d-block"],["formControlName","LocationId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","ContactName",1,"mb-2","d-block"],["pInputText","","type","text","id","ContactName","formControlName","ContactName",1,"w-100","mb-2"],["for","IssueDate",1,"mb-2","d-block"],["id","IssueDate","formControlName","IssueDate",1,"w-100","mb-2",3,"showIcon"],["for","ExpireDate",1,"mb-2","d-block"],["id","ExpireDate","formControlName","ExpireDate",1,"w-100","mb-2",3,"showIcon"],[1,"col-md-3","mb-5"],["for","ReferenceNumber",1,"mb-2","d-block"],["pInputText","","type","text","id","ReferenceNumber","formControlName","ReferenceNumber",1,"w-100","mb-2"],["for","PONumber",1,"mb-2","d-block"],["pInputText","","type","text","id","PONumber","formControlName","PONumber",1,"w-100","mb-2"],["for","SalespersonId",1,"mb-2","d-block"],["pInputText","","type","text","id","SalespersonId","formControlName","SalespersonId",1,"w-100","mb-2"],["for","VersionNumber",1,"mb-2","d-block"],["pInputText","","type","text","id","VersionNumber","formControlName","VersionNumber",1,"w-100","mb-2"],["for","CheckedBy",1,"mb-2","d-block"],["pInputText","","type","text","id","CheckedBy","formControlName","CheckedBy",1,"w-100","mb-2"],["for","branchList",1,"mb-2","d-block"],["formControlName","BranchId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","areaList",1,"mb-2","d-block"],["formControlName","AreaId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],[1,"details","mb-5"],[1,"fw-bold","mb-3"],[1,"table","table-responsive","table-input","w-100"],["formArrayName","SalesQuotationItems"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"addItem","mt-3"],[1,"fa-solid","fa-plus",3,"click"],["for","SubTotal",1,"mb-2","d-block"],["pInputText","","type","text","id","SubTotal","formControlName","SubTotal",1,"w-100","mb-2"],["for","Discount",1,"mb-2","d-block"],["pInputText","","type","text","id","Discount","formControlName","Discount",1,"w-100","mb-2"],["for","TaxValue",1,"mb-2","d-block"],["pInputText","","type","text","id","TaxValue","formControlName","TaxValue",1,"w-100","mb-2"],["for","TotalAmount",1,"mb-2","d-block"],["pInputText","","type","text","id","TotalAmount","formControlName","TotalAmount",1,"w-100","mb-2"],[3,"formGroupName"],["placeholder","","formControlName","itemid",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["pInputText","","formControlName","price"],["pInputText","","formControlName","qty"],["pInputText","","formControlName","tax"],["pInputText","","formControlName","total","readonly","",2,"background-color","#E2E8F0"],["pInputText","","formControlName","description"],[1,"fa-solid","fa-trash-can",2,"color","red","cursor","pointer",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.UpdateQuotation()}),e.j41(1,"div",1)(2,"app-submit-btns",2),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(3,"div",3),e.nrm(4,"app-breadcrump"),e.j41(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.nrm(11,"input",8),e.DNE(12,xe,3,3,"p-message",9),e.k0s(),e.j41(13,"div",6)(14,"label",10),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.nrm(17,"app-auto-complete",11),e.DNE(18,Ae,3,3,"p-message",9),e.k0s(),e.j41(19,"div",6)(20,"label",12),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.nrm(23,"app-auto-complete",13),e.DNE(24,qe,3,3,"p-message",9),e.k0s(),e.j41(25,"div",6)(26,"label",14),e.EFF(27),e.nI1(28,"translate"),e.k0s(),e.nrm(29,"input",15),e.DNE(30,Ue,3,3,"p-message",9),e.k0s(),e.j41(31,"div",6)(32,"label",16),e.EFF(33),e.nI1(34,"translate"),e.k0s(),e.nrm(35,"p-datePicker",17),e.DNE(36,Pe,3,3,"p-message",9),e.k0s(),e.j41(37,"div",6)(38,"label",18),e.EFF(39),e.nI1(40,"translate"),e.k0s(),e.nrm(41,"p-datePicker",19),e.DNE(42,Be,3,3,"p-message",9),e.k0s(),e.j41(43,"div",20)(44,"label",21),e.EFF(45),e.nI1(46,"translate"),e.k0s(),e.nrm(47,"input",22),e.k0s(),e.j41(48,"div",20)(49,"label",23),e.EFF(50),e.nI1(51,"translate"),e.k0s(),e.nrm(52,"input",24),e.k0s(),e.j41(53,"div",20)(54,"label",25),e.EFF(55),e.nI1(56,"translate"),e.k0s(),e.nrm(57,"input",26),e.k0s(),e.j41(58,"div",20)(59,"label",27),e.EFF(60),e.nI1(61,"translate"),e.k0s(),e.nrm(62,"input",28),e.k0s(),e.j41(63,"div",6)(64,"label",29),e.EFF(65),e.nI1(66,"translate"),e.k0s(),e.nrm(67,"input",30),e.k0s(),e.j41(68,"div",6)(69,"label",31),e.EFF(70),e.nI1(71,"translate"),e.k0s(),e.nrm(72,"app-auto-complete",32),e.DNE(73,Xe,3,3,"p-message",9),e.k0s(),e.j41(74,"div",6)(75,"label",33),e.EFF(76),e.nI1(77,"translate"),e.k0s(),e.nrm(78,"app-auto-complete",34),e.DNE(79,Ve,3,3,"p-message",9),e.k0s(),e.j41(80,"div",35)(81,"h5",36),e.EFF(82),e.nI1(83,"translate"),e.k0s(),e.j41(84,"table",37)(85,"thead")(86,"tr")(87,"th"),e.EFF(88),e.nI1(89,"translate"),e.k0s(),e.j41(90,"th"),e.EFF(91),e.nI1(92,"translate"),e.k0s(),e.j41(93,"th"),e.EFF(94),e.nI1(95,"translate"),e.k0s(),e.j41(96,"th"),e.EFF(97),e.nI1(98,"translate"),e.k0s(),e.j41(99,"th"),e.EFF(100),e.nI1(101,"translate"),e.k0s(),e.j41(102,"th"),e.EFF(103),e.nI1(104,"translate"),e.k0s(),e.nrm(105,"th"),e.k0s()(),e.j41(106,"tbody",38),e.DNE(107,Ye,16,11,"tr",39),e.k0s()(),e.j41(108,"a",40)(109,"i",41),e.bIt("click",function(){return o.addItem()}),e.k0s()()(),e.nrm(110,"hr"),e.j41(111,"div",20)(112,"label",42),e.EFF(113),e.nI1(114,"translate"),e.k0s(),e.nrm(115,"input",43),e.k0s(),e.j41(116,"div",20)(117,"label",44),e.EFF(118),e.nI1(119,"translate"),e.k0s(),e.nrm(120,"input",45),e.k0s(),e.j41(121,"div",20)(122,"label",46),e.EFF(123),e.nI1(124,"translate"),e.k0s(),e.nrm(125,"input",47),e.k0s(),e.j41(126,"div",20)(127,"label",48),e.EFF(128),e.nI1(129,"translate"),e.k0s(),e.nrm(130,"input",49),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(7),e.JRh(e.bMT(10,66,"QuotationNumber")),e.R7$(3),e.vxM(o.isInvalid("QuotationNumber")?12:-1),e.R7$(3),e.JRh(e.bMT(16,68,"CustomerName")),e.R7$(2),e.Y8G("data",o.customerList)("displayField",e.lJ4(114,re))("searchFields",e.lJ4(115,re))("valueField","Id")("lookupData",o.customerList)("readonly",!1)("validStyle",o.isInvalid("CustomerId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CustomerId")?18:-1),e.R7$(3),e.JRh(e.bMT(22,70,"LocationName")),e.R7$(2),e.Y8G("data",o.locationList)("displayField",e.lJ4(116,j))("searchFields",e.lJ4(117,j))("valueField","Id")("lookupData",o.locationList)("readonly",!1)("validStyle",o.isInvalid("LocationId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("LocationId")?24:-1),e.R7$(3),e.JRh(e.bMT(28,72,"ContactName")),e.R7$(3),e.vxM(o.isInvalid("ContactName")?30:-1),e.R7$(3),e.JRh(e.bMT(34,74,"IssueDate")),e.R7$(2),e.Y8G("showIcon",!0),e.R7$(),e.vxM(o.isInvalid("IssueDate")?36:-1),e.R7$(3),e.JRh(e.bMT(40,76,"ExpireDate")),e.R7$(2),e.Y8G("showIcon",!0),e.R7$(),e.vxM(o.isInvalid("ExpireDate")?42:-1),e.R7$(3),e.JRh(e.bMT(46,78,"ReferenceNumber")),e.R7$(5),e.JRh(e.bMT(51,80,"PONumber")),e.R7$(5),e.JRh(e.bMT(56,82,"SalespersonId")),e.R7$(5),e.JRh(e.bMT(61,84,"VersionNumber")),e.R7$(5),e.JRh(e.bMT(66,86,"CheckedBy")),e.R7$(5),e.JRh(e.bMT(71,88,"BranchName")),e.R7$(2),e.Y8G("data",o.branchList)("displayField",e.lJ4(118,ne))("searchFields",e.lJ4(119,ne))("valueField","Id")("lookupData",o.branchList)("readonly",!1)("validStyle",o.isInvalid("BranchId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("BranchId")?73:-1),e.R7$(3),e.JRh(e.bMT(77,90,"AreaName")),e.R7$(2),e.Y8G("data",o.areaList)("displayField",e.lJ4(120,j))("searchFields",e.lJ4(121,j))("valueField","Id")("lookupData",o.areaList)("readonly",!1)("validStyle",o.isInvalid("AreaId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("AreaId")?79:-1),e.R7$(3),e.JRh(e.bMT(83,92,"SalesQuotationItems")),e.R7$(6),e.JRh(e.bMT(89,94,"Item")),e.R7$(3),e.JRh(e.bMT(92,96,"Price")),e.R7$(3),e.JRh(e.bMT(95,98,"Quantity")),e.R7$(3),e.JRh(e.bMT(98,100,"Tax (%)")),e.R7$(3),e.JRh(e.bMT(101,102,"Total")),e.R7$(3),e.JRh(e.bMT(104,104,"Description")),e.R7$(4),e.Y8G("ngForOf",o.items.controls),e.R7$(6),e.JRh(e.bMT(114,106,"SubTotal")),e.R7$(5),e.JRh(e.bMT(119,108,"Discount")),e.R7$(5),e.JRh(e.bMT(124,110,"Tax (%)")),e.R7$(5),e.JRh(e.bMT(129,112,"TotalAmount")))},dependencies:[k.Sq,J.R,a.qT,a.me,a.BC,a.cb,L.V,a.j4,a.JD,a.$R,a.v8,D.S,E.QB,oe.lr,w.Sm,I.D9],styles:[".table-input[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #dee2e6;padding:0!important;vertical-align:middle}.table-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], [_nghost-%COMP%]     .table-input app-auto-complete input{border:none!important;width:100%;height:100%;padding:8px 10px;box-shadow:none;background:transparent;text-align:center}.table-input[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #dee2e6;background-color:#f8f9fa;font-weight:600;text-align:center}.addItem[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.addItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{border:1px solid #31D8CE;color:#31d8ce;font-size:1.5rem;width:2.7rem;height:2.7rem;border-radius:50%;text-align:center;line-height:2.7rem;cursor:pointer}"]})}return i})()}];let He=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[u.iI.forChild(ze),u.iI]})}return i})();var Ke=m(6176);let Ze=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[k.MD,He,u.iI,Ke.G]})}return i})()}}]);