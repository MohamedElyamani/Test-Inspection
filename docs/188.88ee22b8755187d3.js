"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[188],{6188:(Ae,w,d)=>{d.r(w),d.d(w,{CustomerModule:()=>De});var I=d(177),c=d(2791),R=d(7468),N=d(980),b=d(1174),e=d(3953),X=d(5312),q=d(1626);let C=(()=>{class a{_http;baseUrl=X.c.baseUrl;constructor(t){this._http=t}getCompanyList(){return this._http.post(`${this.baseUrl}/api/Company/Index`,{})}getCompanyById(t){return this._http.get(`${this.baseUrl}/api/Company/GetById/${t}`)}createCompany(t){return this._http.post(`${this.baseUrl}/api/Company/Create`,t)}updateCompany(t,s){return this._http.post(`${this.baseUrl}/api/Company/Update/${t}`,s)}deleteCompany(t){return this._http.post(`${this.baseUrl}/api/Company/Delete/${t}`,{})}getCompanyLookUp(){return this._http.get(`${this.baseUrl}/api/Company/LookUpCompanyForNames`,{})}static \u0275fac=function(s){return new(s||a)(e.KVO(q.Qq))};static \u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var p=d(5794);let x=(()=>{class a{_companyService;cd;_router;_activateRoute;_toastr;dataSource=[];selectedRow=[];columnsSchema=[{key:"Name",label:"Company Name"},{key:"Address",label:"Address"}];dataList;constructor(t,s,o,r,n){this._companyService=t,this.cd=s,this._router=o,this._activateRoute=r,this._toastr=n}ngOnInit(){this.companyList()}companyList(){this._companyService.getCompanyList().subscribe({next:t=>{this.dataSource=t,this.cd.detectChanges()},error:t=>{console.error("Error getting area data",t)}})}navigateToEdit(t){t?.Id&&this._router.navigate(["edit",t.Id],{relativeTo:this._activateRoute})}onSelectedRows(t){this.selectedRow=t}deleteSelected(t){const s=t.map(o=>this._companyService.deleteCompany(o.Id));(0,R.p)(s).pipe((0,N.j)(()=>this.companyList())).subscribe({next:()=>{this._toastr.success("Company deleted successfully"),this.selectedRow=[],this.dataList.clearSelection(),this.cd.detectChanges()},error:o=>{this._toastr.error("Error deleting area")}})}static \u0275fac=function(s){return new(s||a)(e.rXU(C),e.rXU(e.gRc),e.rXU(c.Ix),e.rXU(c.nX),e.rXU(p.tw))};static \u0275cmp=e.VBU({type:a,selectors:[["app-company-list"]],viewQuery:function(s,o){if(1&s&&e.GBs(b.q,5),2&s){let r;e.mGM(r=e.lsd())&&(o.dataList=r.first)}},decls:2,vars:2,consts:[[3,"selectedRows","rowClick","onDelete","dataSource","columnsSchema"]],template:function(s,o){1&s&&(e.j41(0,"app-data-list",0),e.bIt("selectedRows",function(n){return o.onSelectedRows(n)})("rowClick",function(n){return o.navigateToEdit(n)})("onDelete",function(n){return o.deleteSelected(n)}),e.k0s(),e.nrm(1,"router-outlet")),2&s&&e.Y8G("dataSource",o.dataSource)("columnsSchema",o.columnsSchema)},dependencies:[c.n3,b.q]})}return a})();var i=d(9417),l=d(9079),f=d(9298),v=d(5114),_=d(2242),u=d(9664);function G(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Company Name is required")," "))}function B(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Company Address is required")," "))}let Q=(()=>{class a{_companyService;_toastr;_destroyRef;data;errorMessage="";form=new i.gE({Name:new i.MJ("",[i.k0.required]),Address:new i.MJ("",[i.k0.required])});constructor(t,s,o){this._companyService=t,this._toastr=s,this._destroyRef=o}ngOnInit(){this.form.valueChanges.pipe((0,l.pQ)(this._destroyRef)).subscribe()}createCompany(){this.form.valid&&this._companyService.createCompany({Name:this.form.value.Name||"",Address:this.form.value.Address||""}).pipe((0,l.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this.form.reset(),this._toastr.success("Company created successfully")},error:s=>{this.errorMessage=s.message,this._toastr.error("Failed to Create Company")}})}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}static \u0275fac=function(s){return new(s||a)(e.rXU(C),e.rXU(p.tw),e.rXU(e.abz))};static \u0275cmp=e.VBU({type:a,selectors:[["app-company-add"]],decls:18,vars:11,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center","mb-3"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3","mt-3"],[1,"container"],[1,"row"],[1,"col-md-6"],["for","companyName",1,"mb-2","d-block"],["pInputText","","type","text","id","companyName","formControlName","Name",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","companyAddress",1,"mb-2","d-block"],["pInputText","","type","text","id","companyAddress","formControlName","Address",1,"w-100","mb-2"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.createCompany()}),e.j41(1,"div",1)(2,"app-submit-btns",2),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.nrm(10,"input",8),e.DNE(11,G,3,3,"p-message",9),e.k0s(),e.j41(12,"div",6)(13,"label",10),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.nrm(16,"input",11),e.DNE(17,B,3,3,"p-message",9),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(6),e.JRh(e.bMT(9,7,"Company Name")),e.R7$(3),e.vxM(o.isInvalid("Name")?11:-1),e.R7$(3),e.JRh(e.bMT(15,9,"Company Address")),e.R7$(3),e.vxM(o.isInvalid("Address")?17:-1))},dependencies:[i.qT,i.me,i.BC,i.cb,f.V,i.j4,i.JD,v.QB,_.Sm,u.D9]})}return a})();var k=d(4006);function Y(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Company Name is required")," "))}function V(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Company Address is required")," "))}let z=(()=>{class a{_companyService;_toastr;_destroyRef;_activateRoute;_router;_location;data;errorMessage="";companyId;form=new i.gE({Name:new i.MJ("",[i.k0.required]),Address:new i.MJ("",[i.k0.required])});constructor(t,s,o,r,n,h){this._companyService=t,this._toastr=s,this._destroyRef=o,this._activateRoute=r,this._router=n,this._location=h}ngOnInit(){this.companyId=Number(this._activateRoute.snapshot.paramMap.get("id")||""),this.companyId&&this.companyById(this.companyId),this.form.valueChanges.pipe((0,l.pQ)(this._destroyRef)).subscribe()}companyById(t){this._companyService.getCompanyById(t).pipe((0,l.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this.form.patchValue({Name:this.data.Name,Address:this.data.Address})},error:s=>{this.errorMessage=s.message,this._toastr.error(this.errorMessage)}})}updateCompany(){this.form.valid&&this._companyService.updateCompany(this.companyId,{Id:this.companyId,Name:this.form.value.Name||"",Address:this.form.value.Address||"",Tenant_ID:this.data.Tenant_ID||""}).pipe((0,l.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this.form.reset(),this.backAfterEdit(),this._toastr.success("Company updated successfully")},error:s=>{this.errorMessage=s.message,this._toastr.error("Failed to update company")}})}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}backAfterEdit(){const t=this._location.path(),s=t.indexOf("/company");if(-1!==s){const o=t.substring(0,s+8);this._router.navigate([o])}else this._router.navigate(["/"])}navigateToCreate(){this._router.navigate(["../../add"],{relativeTo:this._activateRoute})}static \u0275fac=function(s){return new(s||a)(e.rXU(C),e.rXU(p.tw),e.rXU(e.abz),e.rXU(c.nX),e.rXU(c.Ix),e.rXU(I.aZ))};static \u0275cmp=e.VBU({type:a,selectors:[["app-company-edit"]],decls:19,vars:14,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center"],[3,"onAdd","showAdd","showPrint","showDelete"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3"],[1,"container"],[1,"row"],[1,"col-md-6"],["for","companyName",1,"mb-2","d-block"],["pInputText","","type","text","id","companyName","formControlName","Name",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","companyAddress",1,"mb-2","d-block"],["pInputText","","type","text","id","companyAddress","formControlName","Address",1,"w-100","mb-2"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.updateCompany()}),e.j41(1,"div",1)(2,"app-action-btns",2),e.bIt("onAdd",function(){return o.navigateToCreate()}),e.k0s(),e.j41(3,"app-submit-btns",3),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label",8),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.nrm(11,"input",9),e.DNE(12,Y,3,3,"p-message",10),e.k0s(),e.j41(13,"div",7)(14,"label",11),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.nrm(17,"input",12),e.DNE(18,V,3,3,"p-message",10),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("showAdd",!0)("showPrint",!0)("showDelete",!1),e.R7$(),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(6),e.JRh(e.bMT(10,10,"Company Name")),e.R7$(3),e.vxM(o.isInvalid("Name")?12:-1),e.R7$(3),e.JRh(e.bMT(16,12,"Company Address")),e.R7$(3),e.vxM(o.isInvalid("Address")?18:-1))},dependencies:[i.qT,i.me,i.BC,i.cb,k.t,f.V,i.j4,i.JD,v.QB,_.Sm,u.D9]})}return a})();var L=d(1899);let O=(()=>{class a{_toastr;cd;_router;_activateRoute;_ProjectService;dataSource=[];selectedRow=[];columnsSchema=[{key:"Name",label:"Project Name"},{key:"CustomerArabicName",label:"Customer Arabic Name"},{key:"CustomerEnglishName",label:"Customer English Name"},{key:"CompanyName",label:"Company Name"},{key:"LocationName",label:"Location"},{key:"ProjectDate",label:"Project Date"}];dataList;constructor(t,s,o,r,n){this._toastr=t,this.cd=s,this._router=o,this._activateRoute=r,this._ProjectService=n}ngOnInit(){this.ProjectList()}ProjectList(){this._ProjectService.getProjectList().subscribe({next:t=>{console.log(t),this.dataSource=t,this.cd.detectChanges()},error:t=>{console.error("Error getting location data",t)}})}navigateToEdit(t){t?.Id&&this._router.navigate(["edit",t.Id],{relativeTo:this._activateRoute})}onSelectedRows(t){this.selectedRow=t}deleteSelected(t){const s=t.map(o=>this._ProjectService.deleteProject(o.Id));(0,R.p)(s).pipe((0,N.j)(()=>this.ProjectList())).subscribe({next:()=>{this._toastr.success("Project deleted successfully"),this.selectedRow=[],this.dataList.clearSelection(),this.cd.detectChanges()},error:o=>{this._toastr.error("Error deleting Project: "+o.message)}})}static \u0275fac=function(s){return new(s||a)(e.rXU(p.tw),e.rXU(e.gRc),e.rXU(c.Ix),e.rXU(c.nX),e.rXU(L.T))};static \u0275cmp=e.VBU({type:a,selectors:[["app-project-list"]],viewQuery:function(s,o){if(1&s&&e.GBs(b.q,5),2&s){let r;e.mGM(r=e.lsd())&&(o.dataList=r.first)}},decls:2,vars:2,consts:[[3,"selectedRows","rowClick","onDelete","dataSource","columnsSchema"]],template:function(s,o){1&s&&(e.j41(0,"app-data-list",0),e.bIt("selectedRows",function(n){return o.onSelectedRows(n)})("rowClick",function(n){return o.navigateToEdit(n)})("onDelete",function(n){return o.deleteSelected(n)}),e.k0s(),e.nrm(1,"router-outlet")),2&s&&e.Y8G("dataSource",o.dataSource)("columnsSchema",o.columnsSchema)},dependencies:[c.n3,b.q]})}return a})();var y=d(6694),g=d(5751),M=d(1938);const E=()=>["Id","Name"],D=()=>["Id","EnName","ArName"];function Z(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1," Name is required")," "))}function H(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Company is required")," "))}function K(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Customer is required")," "))}function W(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Location is required")," "))}function ee(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1," Project Date is required")," "))}const F=()=>["Id","Name"],$=()=>["Id","EnName","ArName"];function se(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1," Name is required")," "))}function oe(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Company is required")," "))}function ae(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Customer is required")," "))}function ie(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Location is required")," "))}function re(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1," Project Date is required")," "))}function le(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"English Name is required")," "))}function de(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Arabic Name is required")," "))}function ce(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Email is required")," "))}function pe(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Mobile Number is required")," "))}function ue(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Contact Person is required")," "))}function he(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Address is required")," "))}function fe(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"English Name is required")," "))}function ve(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Arabic Name is required")," "))}function _e(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Email is required")," "))}function Ce(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Mobile Number is required")," "))}function ye(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Contact Person is required")," "))}function Ie(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Address is required")," "))}const A=()=>["Id","Name"],P=()=>["Id","EnName","ArName"];function Re(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Location Name is required")," "))}function Ne(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Company is required")," "))}function ke(a,m){1&a&&(e.j41(0,"p-message",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Customer is required")," "))}const U=()=>["Id","Name"],J=()=>["Id","EnName","ArName"];function Ee(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Location Name is required")," "))}function Fe(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Company is required")," "))}function Le(a,m){1&a&&(e.j41(0,"p-message",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Customer is required")," "))}const Te=[{path:"company",component:x},{path:"company/add",component:Q},{path:"company/edit/:id",component:z},{path:"project",component:O},{path:"project/add",component:(()=>{class a{_projectService;_toastr;_destroyRef;translat;_companyService;_customerService;_locationService;data;errorMessage="";companyList;customerList;LocationList;form=new i.gE({Name:new i.MJ("",[i.k0.required]),CustomerId:new i.MJ(null,[i.k0.required]),CompanyId:new i.MJ(null,[i.k0.required]),LocationId:new i.MJ(null,[i.k0.required]),ProjectDate:new i.MJ(new Date)});constructor(t,s,o,r,n,h,S){this._projectService=t,this._toastr=s,this._destroyRef=o,this.translat=r,this._companyService=n,this._customerService=h,this._locationService=S}ngOnInit(){this.form.valueChanges.pipe((0,l.pQ)(this._destroyRef)).subscribe(),this.getCompanyList(),this.getCustomerList(),this.getLocationList()}getCompanyList(){this._companyService.getCompanyLookUp().pipe((0,l.pQ)(this._destroyRef)).subscribe({next:t=>{this.companyList=t},error:t=>{this.errorMessage=t.message}})}getCustomerList(){this._customerService.getCustomerLookUp().pipe((0,l.pQ)(this._destroyRef)).subscribe({next:t=>{this.customerList=t},error:t=>{this.errorMessage=t.message}})}getLocationList(){this._locationService.getLocationLookUp().pipe((0,l.pQ)(this._destroyRef)).subscribe({next:t=>{this.LocationList=t},error:t=>{this.errorMessage=t.message}})}createProject(){this.form.valid?this._projectService.createProject({Name:this.form.value.Name,CustomerId:this.form.value.CustomerId,CompanyId:this.form.value.CompanyId,LocationId:this.form.value.LocationId,ProjectDate:this.form.value.ProjectDate?this.form.value.ProjectDate:new Date}).pipe((0,l.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this.form.reset(),this._toastr.success(this.translat.instant("Project Created successfully"))},error:s=>{this.errorMessage=s.message,this._toastr.success(this.translat.instant("Failed to Create project: "+this.errorMessage))}}):this._toastr.success(this.translat.instant("Please fill in all required fields before saving."))}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}static \u0275fac=function(s){return new(s||a)(e.rXU(L.T),e.rXU(p.tw),e.rXU(e.abz),e.rXU(u.c$),e.rXU(C),e.rXU(y.v),e.rXU(g.N))};static \u0275cmp=e.VBU({type:a,selectors:[["app-project-add"]],decls:36,vars:50,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center","mb-3"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3","mt-3"],[1,"container"],[1,"row"],[1,"col-md-4"],["for","Name",1,"mb-2","d-block"],["pInputText","","type","text","id","Name","formControlName","Name",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","CompanyList",1,"mb-2","d-block"],["formControlName","CompanyId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","CustomerList",1,"mb-2","d-block"],["formControlName","CustomerId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","LocationList",1,"mb-2","d-block"],["formControlName","LocationId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["pInputText","","type","datetime-local","id","ProjectDate","formControlName","ProjectDate",1,"w-100","mb-2"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.createProject()}),e.j41(1,"div",1)(2,"app-submit-btns",2),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.nrm(10,"input",8),e.DNE(11,Z,3,3,"p-message",9),e.k0s(),e.j41(12,"div",6)(13,"label",10),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.nrm(16,"app-auto-complete",11),e.DNE(17,H,3,3,"p-message",9),e.k0s(),e.j41(18,"div",6)(19,"label",12),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.nrm(22,"app-auto-complete",13),e.DNE(23,K,3,3,"p-message",9),e.k0s(),e.j41(24,"div",6)(25,"label",14),e.EFF(26),e.nI1(27,"translate"),e.k0s(),e.nrm(28,"app-auto-complete",15),e.DNE(29,W,3,3,"p-message",9),e.k0s(),e.j41(30,"div",6)(31,"label",7),e.EFF(32),e.nI1(33,"translate"),e.k0s(),e.nrm(34,"input",16),e.DNE(35,ee,3,3,"p-message",9),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(6),e.JRh(e.bMT(9,34," Name")),e.R7$(3),e.vxM(o.isInvalid("Name")?11:-1),e.R7$(3),e.JRh(e.bMT(15,36,"Company Name")),e.R7$(2),e.Y8G("data",o.companyList)("displayField",e.lJ4(44,E))("searchFields",e.lJ4(45,E))("valueField","Id")("lookupData",o.companyList)("readonly",!1)("validStyle",o.isInvalid("CompanyId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CompanyId")?17:-1),e.R7$(3),e.JRh(e.bMT(21,38,"Customer Name")),e.R7$(2),e.Y8G("data",o.customerList)("displayField",e.lJ4(46,D))("searchFields",e.lJ4(47,D))("valueField","Id")("lookupData",o.customerList)("readonly",!1)("validStyle",o.isInvalid("CustomerId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CustomerId")?23:-1),e.R7$(3),e.JRh(e.bMT(27,40,"Location ")),e.R7$(2),e.Y8G("data",o.LocationList)("displayField",e.lJ4(48,E))("searchFields",e.lJ4(49,E))("valueField","Id")("lookupData",o.LocationList)("readonly",!1)("validStyle",o.isInvalid("LocationId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("LocationId")?29:-1),e.R7$(3),e.JRh(e.bMT(33,42," Date")),e.R7$(3),e.vxM(o.isInvalid("ProjectDate")?35:-1))},dependencies:[i.qT,i.me,i.BC,i.cb,f.V,i.j4,i.JD,M.S,v.QB,_.Sm,u.D9]})}return a})()},{path:"project/edit/:id",component:(()=>{class a{_ProjectService;_toastr;_destroyRef;translat;_activateRoute;_router;_location;_companyService;_customerService;_locationService;data;errorMessage="";projectId;companyList;customerList;LocationList;form=new i.gE({Name:new i.MJ("",[i.k0.required]),CustomerId:new i.MJ(0,[i.k0.required]),CompanyId:new i.MJ(0,[i.k0.required]),LocationId:new i.MJ(0,[i.k0.required]),ProjectDate:new i.MJ(new Date,[i.k0.required])});constructor(t,s,o,r,n,h,S,T,j,$e){this._ProjectService=t,this._toastr=s,this._destroyRef=o,this.translat=r,this._activateRoute=n,this._router=h,this._location=S,this._companyService=T,this._customerService=j,this._locationService=$e}ngOnInit(){this.projectId=Number(this._activateRoute.snapshot.paramMap.get("id")||""),this.projectId&&(this.getProjectById(this.projectId),this.getCompanyList(),this.getCustomerList(),this.getLocationList()),this.form.valueChanges.pipe((0,l.pQ)(this._destroyRef)).subscribe()}getCompanyList(){this._companyService.getCompanyLookUp().pipe((0,l.pQ)(this._destroyRef)).subscribe({next:t=>{this.companyList=t},error:t=>{this.errorMessage=t.message}})}getCustomerList(){this._customerService.getCustomerLookUp().pipe((0,l.pQ)(this._destroyRef)).subscribe({next:t=>{this.customerList=t},error:t=>{this.errorMessage=t.message}})}getProjectById(t){this._ProjectService.getProjectById(t).subscribe({next:s=>{this.data=s,this.form.patchValue({Name:s.Name,CustomerId:this.data.CustomerId,CompanyId:this.data.CompanyId,LocationId:this.data.LocationId,ProjectDate:this.data.ProjectDate?this.data.ProjectDate:new Date})},error:s=>{this.errorMessage=s.message}})}getLocationList(){this._locationService.getLocationLookUp().pipe((0,l.pQ)(this._destroyRef)).subscribe({next:t=>{this.LocationList=t},error:t=>{this.errorMessage=t.message}})}updateProject(){this.form.valid&&this.projectId?(console.log(this.form),this._ProjectService.updateProject(this.projectId,{Id:this.projectId,Name:this.form.value.Name,CustomerId:this.form.value.CustomerId,CompanyId:this.form.value.CompanyId,LocationId:this.form.value.LocationId,ProjectDate:this.form.value.ProjectDate?this.form.value.ProjectDate:new Date}).pipe((0,l.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this._toastr.success(this.translat.instant("Project updated successfully")),this.backAfterEdit()},error:s=>{this.errorMessage=s.message,this._toastr.success(this.translat.instant("Failed to update project: "+this.errorMessage))}})):this._toastr.success(this.translat.instant("Please fill in all required fields before saving."))}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}backAfterEdit(){const t=this._location.path(),s=t.indexOf("/Project");if(-1!==s){const o=t.substring(0,s+8);this._router.navigate([o])}else this._router.navigate(["/"])}navigateToCreate(){this._router.navigate(["../../add"],{relativeTo:this._activateRoute})}static \u0275fac=function(s){return new(s||a)(e.rXU(L.T),e.rXU(p.tw),e.rXU(e.abz),e.rXU(u.c$),e.rXU(c.nX),e.rXU(c.Ix),e.rXU(I.aZ),e.rXU(C),e.rXU(y.v),e.rXU(g.N))};static \u0275cmp=e.VBU({type:a,selectors:[["app-project-edit"]],decls:37,vars:53,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center"],[3,"onAdd","showAdd","showPrint","showDelete"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3"],[1,"container"],[1,"row"],[1,"col-md-4"],["for","Name",1,"mb-2","d-block"],["pInputText","","type","text","id","Name","formControlName","Name",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","CompanyList",1,"mb-2","d-block"],["formControlName","CompanyId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","CustomerList",1,"mb-2","d-block"],["formControlName","CustomerId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","LocationList",1,"mb-2","d-block"],["formControlName","LocationId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["pInputText","","type","datetime-local","id","ProjectDate","formControlName","ProjectDate",1,"w-100","mb-2"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.updateProject()}),e.j41(1,"div",1)(2,"app-action-btns",2),e.bIt("onAdd",function(){return o.navigateToCreate()}),e.k0s(),e.j41(3,"app-submit-btns",3),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label",8),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.nrm(11,"input",9),e.DNE(12,se,3,3,"p-message",10),e.k0s(),e.j41(13,"div",7)(14,"label",11),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.nrm(17,"app-auto-complete",12),e.DNE(18,oe,3,3,"p-message",10),e.k0s(),e.j41(19,"div",7)(20,"label",13),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.nrm(23,"app-auto-complete",14),e.DNE(24,ae,3,3,"p-message",10),e.k0s(),e.j41(25,"div",7)(26,"label",15),e.EFF(27),e.nI1(28,"translate"),e.k0s(),e.nrm(29,"app-auto-complete",16),e.DNE(30,ie,3,3,"p-message",10),e.k0s(),e.j41(31,"div",7)(32,"label",8),e.EFF(33),e.nI1(34,"translate"),e.k0s(),e.nrm(35,"input",17),e.DNE(36,re,3,3,"p-message",10),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("showAdd",!0)("showPrint",!0)("showDelete",!1),e.R7$(),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(6),e.JRh(e.bMT(10,37," Name")),e.R7$(3),e.vxM(o.isInvalid("Name")?12:-1),e.R7$(3),e.JRh(e.bMT(16,39,"Company Name")),e.R7$(2),e.Y8G("data",o.companyList)("displayField",e.lJ4(47,F))("searchFields",e.lJ4(48,F))("valueField","Id")("lookupData",o.companyList)("readonly",!1)("validStyle",o.isInvalid("CompanyId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CompanyId")?18:-1),e.R7$(3),e.JRh(e.bMT(22,41,"Customer Name")),e.R7$(2),e.Y8G("data",o.customerList)("displayField",e.lJ4(49,$))("searchFields",e.lJ4(50,$))("valueField","Id")("lookupData",o.customerList)("readonly",!1)("validStyle",o.isInvalid("CustomerId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CustomerId")?24:-1),e.R7$(3),e.JRh(e.bMT(28,43,"Location ")),e.R7$(2),e.Y8G("data",o.LocationList)("displayField",e.lJ4(51,F))("searchFields",e.lJ4(52,F))("valueField","Id")("lookupData",o.LocationList)("readonly",!1)("validStyle",o.isInvalid("LocationId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("LocationId")?30:-1),e.R7$(3),e.JRh(e.bMT(34,45," Date")),e.R7$(3),e.vxM(o.isInvalid("ProjectDate")?36:-1))},dependencies:[i.qT,i.me,i.BC,i.cb,k.t,f.V,i.j4,i.JD,M.S,v.QB,_.Sm,u.D9]})}return a})()},{path:"customer-setup",component:(()=>{class a{_customerSetubService;cd;_router;_activateRoute;_toastr;dataSource=[];selectedRow=[];columnsSchema=[{key:"EnName",label:"English Name"},{key:"ArName",label:"Arabic Name"},{key:"Address",label:"Address"},{key:"PrimaryMobileNumber",label:"Mobile Number"},{key:"SecondryMobileNumber",label:"Another Mobile"},{key:"Email",label:"Email"},{key:"ContactPerson",label:"Contact Person"}];dataList;constructor(t,s,o,r,n){this._customerSetubService=t,this.cd=s,this._router=o,this._activateRoute=r,this._toastr=n}ngOnInit(){this.customerList()}customerList(){this._customerSetubService.getCustomerList().subscribe({next:t=>{this.dataSource=t,this.cd.detectChanges()},error:t=>{console.error("Error getting area data",t)}})}navigateToEdit(t){t?.Id&&this._router.navigate(["edit",t.Id],{relativeTo:this._activateRoute})}onSelectedRows(t){this.selectedRow=t}deleteSelected(t){const s=t.map(o=>this._customerSetubService.deleteCustomer(o.Id));(0,R.p)(s).pipe((0,N.j)(()=>this.customerList())).subscribe({next:()=>{this._toastr.success("Customer deleted successfully"),this.selectedRow=[],this.dataList.clearSelection(),this.cd.detectChanges()},error:o=>{this._toastr.error("Error deleting area")}})}static \u0275fac=function(s){return new(s||a)(e.rXU(y.v),e.rXU(e.gRc),e.rXU(c.Ix),e.rXU(c.nX),e.rXU(p.tw))};static \u0275cmp=e.VBU({type:a,selectors:[["app-customer-setub-list"]],viewQuery:function(s,o){if(1&s&&e.GBs(b.q,5),2&s){let r;e.mGM(r=e.lsd())&&(o.dataList=r.first)}},decls:2,vars:2,consts:[[3,"selectedRows","rowClick","onDelete","dataSource","columnsSchema"]],template:function(s,o){1&s&&(e.j41(0,"app-data-list",0),e.bIt("selectedRows",function(n){return o.onSelectedRows(n)})("rowClick",function(n){return o.navigateToEdit(n)})("onDelete",function(n){return o.deleteSelected(n)}),e.k0s(),e.nrm(1,"router-outlet")),2&s&&e.Y8G("dataSource",o.dataSource)("columnsSchema",o.columnsSchema)},dependencies:[c.n3,b.q]})}return a})()},{path:"customer-setup/add",component:(()=>{class a{_customerService;_toastr;_destroyRef;data;errorMessage="";form=new i.gE({EnName:new i.MJ("",[i.k0.required]),ArName:new i.MJ("",[i.k0.required]),PrimaryMobileNumber:new i.MJ("",[i.k0.required,i.k0.pattern("^[0-9]+$")]),SecondryMobileNumber:new i.MJ("",[i.k0.pattern("^[0-9]+$")]),Email:new i.MJ("",[i.k0.required,i.k0.email]),ContactPerson:new i.MJ("",[i.k0.required]),Address:new i.MJ("",[i.k0.required])});constructor(t,s,o){this._customerService=t,this._toastr=s,this._destroyRef=o}ngOnInit(){this.form.valueChanges.pipe((0,l.pQ)(this._destroyRef)).subscribe()}createCustomer(){this.form.valid&&this._customerService.createCustomer({EnName:this.form.value.EnName||"",ArName:this.form.value.ArName||"",PrimaryMobileNumber:this.form.value.PrimaryMobileNumber||"",SecondryMobileNumber:this.form.value.SecondryMobileNumber||"",Email:this.form.value.Email||"",ContactPerson:this.form.value.ContactPerson||"",Address:this.form.value.Address||"",Tenant_ID:"default"}).pipe((0,l.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this.form.reset(),this._toastr.success("Customer created successfully")},error:s=>{this.errorMessage=s.message,console.log(this.form.value),this._toastr.error("Failed to Create Customer")}})}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}static \u0275fac=function(s){return new(s||a)(e.rXU(y.v),e.rXU(p.tw),e.rXU(e.abz))};static \u0275cmp=e.VBU({type:a,selectors:[["app-customer-setub-add"]],decls:47,vars:30,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center","mb-3"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3","mt-3"],[1,"container"],[1,"row"],[1,"col-md-4"],["for","EnName",1,"mb-2","d-block"],["pInputText","","type","text","id","EnName","formControlName","EnName",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","ArName",1,"mb-2","d-block"],["pInputText","","type","text","id","ArName","formControlName","ArName",1,"w-100","mb-2"],["for","Email",1,"mb-2","d-block"],["pInputText","","type","email","id","Email","formControlName","Email",1,"w-100","mb-2"],["for","PrimaryMobileNumber",1,"mb-2","d-block"],["pInputText","","type","text","id","PrimaryMobileNumber","formControlName","PrimaryMobileNumber",1,"w-100","mb-2"],["for","SecondryMobileNumber",1,"mb-2","d-block"],["pInputText","","type","text","id","SecondryMobileNumber","formControlName","SecondryMobileNumber",1,"w-100","mb-2"],["for","ContactPerson",1,"mb-2","d-block"],["pInputText","","type","text","id","ContactPerson","formControlName","ContactPerson",1,"w-100","mb-2"],[1,"col-md-12"],["for","Address",1,"mb-2","d-block"],["pInputText","","type","text","id","Address","formControlName","Address",1,"w-100","mb-2"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.createCustomer()}),e.j41(1,"div",1)(2,"app-submit-btns",2),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.nrm(10,"input",8),e.DNE(11,le,3,3,"p-message",9),e.k0s(),e.j41(12,"div",6)(13,"label",10),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.nrm(16,"input",11),e.DNE(17,de,3,3,"p-message",9),e.k0s(),e.j41(18,"div",6)(19,"label",12),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.nrm(22,"input",13),e.DNE(23,ce,3,3,"p-message",9),e.k0s(),e.j41(24,"div",6)(25,"label",14),e.EFF(26),e.nI1(27,"translate"),e.k0s(),e.nrm(28,"input",15),e.DNE(29,pe,3,3,"p-message",9),e.k0s(),e.j41(30,"div",6)(31,"label",16),e.EFF(32),e.nI1(33,"translate"),e.k0s(),e.nrm(34,"input",17),e.k0s(),e.j41(35,"div",6)(36,"label",18),e.EFF(37),e.nI1(38,"translate"),e.k0s(),e.nrm(39,"input",19),e.DNE(40,ue,3,3,"p-message",9),e.k0s(),e.j41(41,"div",20)(42,"label",21),e.EFF(43),e.nI1(44,"translate"),e.k0s(),e.nrm(45,"input",22),e.DNE(46,he,3,3,"p-message",9),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(6),e.JRh(e.bMT(9,16,"English Name")),e.R7$(3),e.vxM(o.isInvalid("EnName")?11:-1),e.R7$(3),e.JRh(e.bMT(15,18,"Arabic Name")),e.R7$(3),e.vxM(o.isInvalid("ArName")?17:-1),e.R7$(3),e.JRh(e.bMT(21,20,"Email")),e.R7$(3),e.vxM(o.isInvalid("Email")?23:-1),e.R7$(3),e.JRh(e.bMT(27,22,"Mobile Number")),e.R7$(3),e.vxM(o.isInvalid("PrimaryMobileNumber")?29:-1),e.R7$(3),e.JRh(e.bMT(33,24,"Another Mobile Number")),e.R7$(5),e.JRh(e.bMT(38,26,"Contact Person")),e.R7$(3),e.vxM(o.isInvalid("ContactPerson")?40:-1),e.R7$(3),e.JRh(e.bMT(44,28,"Fully Address")),e.R7$(3),e.vxM(o.isInvalid("Address")?46:-1))},dependencies:[i.qT,i.me,i.BC,i.cb,f.V,i.j4,i.JD,v.QB,_.Sm,u.D9]})}return a})()},{path:"customer-setup/edit/:id",component:(()=>{class a{_customerService;_toastr;_destroyRef;_activateRoute;_router;_location;data;errorMessage="";customerId;form=new i.gE({EnName:new i.MJ("",[i.k0.required]),ArName:new i.MJ("",[i.k0.required]),PrimaryMobileNumber:new i.MJ("",[i.k0.required,i.k0.pattern("^[0-9]+$")]),SecondryMobileNumber:new i.MJ("",[i.k0.pattern("^[0-9]+$")]),Email:new i.MJ("",[i.k0.required,i.k0.email]),ContactPerson:new i.MJ("",[i.k0.required]),Address:new i.MJ("",[i.k0.required])});constructor(t,s,o,r,n,h){this._customerService=t,this._toastr=s,this._destroyRef=o,this._activateRoute=r,this._router=n,this._location=h}ngOnInit(){this.customerId=Number(this._activateRoute.snapshot.paramMap.get("id")||""),this.customerId&&this.customerById(this.customerId),this.form.valueChanges.pipe((0,l.pQ)(this._destroyRef)).subscribe()}customerById(t){this._customerService.getCustomerById(t).pipe((0,l.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this.form.patchValue({EnName:this.data.EnName,ArName:this.data.ArName,PrimaryMobileNumber:this.data.PrimaryMobileNumber,SecondryMobileNumber:this.data.SecondryMobileNumber,Email:this.data.Email,ContactPerson:this.data.ContactPerson,Address:this.data.Address})},error:s=>{this.errorMessage=s.message,this._toastr.error(this.errorMessage)}})}updateCustomer(){this.form.valid&&this._customerService.updateCustomer(this.customerId,{Id:this.customerId,EnName:this.form.value.EnName||"",ArName:this.form.value.ArName||"",PrimaryMobileNumber:this.form.value.PrimaryMobileNumber||"",SecondryMobileNumber:this.form.value.SecondryMobileNumber||"",Email:this.form.value.Email||"",ContactPerson:this.form.value.ContactPerson||"",Address:this.form.value.Address||"",Tenant_ID:this.data.Tenant_ID||""}).pipe((0,l.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this.form.reset(),this.backAfterEdit(),this._toastr.success("Customer updated successfully")},error:s=>{this.errorMessage=s.message,this._toastr.error("Failed to Update Customer")}})}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}backAfterEdit(){const t=this._location.path(),s=t.indexOf("/customer-setup");if(-1!==s){const o=t.substring(0,s+15);this._router.navigate([o])}else this._router.navigate(["/"])}navigateToCreate(){this._router.navigate(["../../add"],{relativeTo:this._activateRoute})}static \u0275fac=function(s){return new(s||a)(e.rXU(y.v),e.rXU(p.tw),e.rXU(e.abz),e.rXU(c.nX),e.rXU(c.Ix),e.rXU(I.aZ))};static \u0275cmp=e.VBU({type:a,selectors:[["app-customer-setub-edit"]],decls:48,vars:33,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center"],[3,"onAdd","showAdd","showPrint","showDelete"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3"],[1,"container"],[1,"row"],[1,"col-md-4"],["for","EnName",1,"mb-2","d-block"],["pInputText","","type","text","id","EnName","formControlName","EnName",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","ArName",1,"mb-2","d-block"],["pInputText","","type","text","id","ArName","formControlName","ArName",1,"w-100","mb-2"],["for","Email",1,"mb-2","d-block"],["pInputText","","type","email","id","Email","formControlName","Email",1,"w-100","mb-2"],["for","PrimaryMobileNumber",1,"mb-2","d-block"],["pInputText","","type","number","id","PrimaryMobileNumber","formControlName","PrimaryMobileNumber",1,"w-100","mb-2"],["for","SecondryMobileNumber",1,"mb-2","d-block"],["pInputText","","type","number","id","SecondryMobileNumber","formControlName","SecondryMobileNumber",1,"w-100","mb-2"],["for","ContactPerson",1,"mb-2","d-block"],["pInputText","","type","text","id","ContactPerson","formControlName","ContactPerson",1,"w-100","mb-2"],[1,"col-md-12"],["for","Address",1,"mb-2","d-block"],["pInputText","","type","text","id","Address","formControlName","Address",1,"w-100","mb-2"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.updateCustomer()}),e.j41(1,"div",1)(2,"app-action-btns",2),e.bIt("onAdd",function(){return o.navigateToCreate()}),e.k0s(),e.j41(3,"app-submit-btns",3),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label",8),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.nrm(11,"input",9),e.DNE(12,fe,3,3,"p-message",10),e.k0s(),e.j41(13,"div",7)(14,"label",11),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.nrm(17,"input",12),e.DNE(18,ve,3,3,"p-message",10),e.k0s(),e.j41(19,"div",7)(20,"label",13),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.nrm(23,"input",14),e.DNE(24,_e,3,3,"p-message",10),e.k0s(),e.j41(25,"div",7)(26,"label",15),e.EFF(27),e.nI1(28,"translate"),e.k0s(),e.nrm(29,"input",16),e.DNE(30,Ce,3,3,"p-message",10),e.k0s(),e.j41(31,"div",7)(32,"label",17),e.EFF(33),e.nI1(34,"translate"),e.k0s(),e.nrm(35,"input",18),e.k0s(),e.j41(36,"div",7)(37,"label",19),e.EFF(38),e.nI1(39,"translate"),e.k0s(),e.nrm(40,"input",20),e.DNE(41,ye,3,3,"p-message",10),e.k0s(),e.j41(42,"div",21)(43,"label",22),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.nrm(46,"input",23),e.DNE(47,Ie,3,3,"p-message",10),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("showAdd",!0)("showPrint",!0)("showDelete",!1),e.R7$(),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(6),e.JRh(e.bMT(10,19,"English Name")),e.R7$(3),e.vxM(o.isInvalid("EnName")?12:-1),e.R7$(3),e.JRh(e.bMT(16,21,"Arabic Name")),e.R7$(3),e.vxM(o.isInvalid("ArName")?18:-1),e.R7$(3),e.JRh(e.bMT(22,23,"Email")),e.R7$(3),e.vxM(o.isInvalid("Email")?24:-1),e.R7$(3),e.JRh(e.bMT(28,25,"Mobile Number")),e.R7$(3),e.vxM(o.isInvalid("PrimaryMobileNumber")?30:-1),e.R7$(3),e.JRh(e.bMT(34,27,"Another Mobile Number")),e.R7$(5),e.JRh(e.bMT(39,29,"Contact Person")),e.R7$(3),e.vxM(o.isInvalid("ContactPerson")?41:-1),e.R7$(3),e.JRh(e.bMT(45,31,"Fully Address")),e.R7$(3),e.vxM(o.isInvalid("Address")?47:-1))},dependencies:[i.qT,i.me,i.Q0,i.BC,i.cb,k.t,f.V,i.j4,i.JD,v.QB,_.Sm,u.D9]})}return a})()},{path:"location",component:(()=>{class a{_toastr;_locationService;cd;_router;_activateRoute;dataSource=[];selectedRow=[];columnsSchema=[{key:"Name",label:"Location Name"},{key:"CustomerArabicName",label:"Customer Arabic Name"},{key:"CustomerEnglishName",label:"Customer English Name"},{key:"CompanyName",label:"Company Name"}];dataList;constructor(t,s,o,r,n){this._toastr=t,this._locationService=s,this.cd=o,this._router=r,this._activateRoute=n}ngOnInit(){this.locationList()}locationList(){this._locationService.getLocationList().subscribe({next:t=>{console.log(t),this.dataSource=t,this.cd.detectChanges()},error:t=>{console.error("Error getting location data",t)}})}navigateToEdit(t){t?.Id&&this._router.navigate(["edit",t.Id],{relativeTo:this._activateRoute})}onSelectedRows(t){this.selectedRow=t}deleteSelected(t){const s=t.map(o=>this._locationService.deleteLocation(o.Id));(0,R.p)(s).pipe((0,N.j)(()=>this.locationList())).subscribe({next:()=>{this._toastr.success("Location deleted successfully"),this.selectedRow=[],this.dataList.clearSelection(),this.cd.detectChanges()},error:o=>{this._toastr.error("Error deleting Location: "+o.message)}})}static \u0275fac=function(s){return new(s||a)(e.rXU(p.tw),e.rXU(g.N),e.rXU(e.gRc),e.rXU(c.Ix),e.rXU(c.nX))};static \u0275cmp=e.VBU({type:a,selectors:[["app-location-list"]],viewQuery:function(s,o){if(1&s&&e.GBs(b.q,5),2&s){let r;e.mGM(r=e.lsd())&&(o.dataList=r.first)}},decls:2,vars:2,consts:[[3,"selectedRows","rowClick","onDelete","dataSource","columnsSchema"]],template:function(s,o){1&s&&(e.j41(0,"app-data-list",0),e.bIt("selectedRows",function(n){return o.onSelectedRows(n)})("rowClick",function(n){return o.navigateToEdit(n)})("onDelete",function(n){return o.deleteSelected(n)}),e.k0s(),e.nrm(1,"router-outlet")),2&s&&e.Y8G("dataSource",o.dataSource)("columnsSchema",o.columnsSchema)},dependencies:[c.n3,b.q]})}return a})()},{path:"location/add",component:(()=>{class a{_locationService;_toastr;_destroyRef;translat;_companyService;_customerService;data;errorMessage="";companyList;customerList;form=new i.gE({Name:new i.MJ("",[i.k0.required]),CustomerId:new i.MJ(null,[i.k0.required]),CompanyId:new i.MJ(null,[i.k0.required])});constructor(t,s,o,r,n,h){this._locationService=t,this._toastr=s,this._destroyRef=o,this.translat=r,this._companyService=n,this._customerService=h}ngOnInit(){this.form.valueChanges.pipe((0,l.pQ)(this._destroyRef)).subscribe(),this.getCompanyList(),this.getCustomerList()}getCompanyList(){this._companyService.getCompanyLookUp().pipe((0,l.pQ)(this._destroyRef)).subscribe({next:t=>{this.companyList=t},error:t=>{this.errorMessage=t.message}})}getCustomerList(){this._customerService.getCustomerLookUp().pipe((0,l.pQ)(this._destroyRef)).subscribe({next:t=>{this.customerList=t},error:t=>{this.errorMessage=t.message}})}createLocation(){this.form.valid&&this._locationService.createLocation({Name:this.form.value.Name,CustomerId:this.form.value.CustomerId,CompanyId:this.form.value.CompanyId}).pipe((0,l.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this.form.reset(),this._toastr.success(this.translat.instant("Location created successfully"))},error:s=>{this.errorMessage=s.message,this._toastr.success(this.translat.instant("Failed to create Location"+this.errorMessage))}})}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}static \u0275fac=function(s){return new(s||a)(e.rXU(g.N),e.rXU(p.tw),e.rXU(e.abz),e.rXU(u.c$),e.rXU(C),e.rXU(y.v))};static \u0275cmp=e.VBU({type:a,selectors:[["app-location-add"]],decls:24,vars:33,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center","mb-3"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3","mt-3"],[1,"container"],[1,"row"],[1,"col-md-4"],["for","Name",1,"mb-2","d-block"],["pInputText","","type","text","id","Name","formControlName","Name",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","CompanyList",1,"mb-2","d-block"],["formControlName","CompanyId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","CustomerList",1,"mb-2","d-block"],["formControlName","CustomerId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.createLocation()}),e.j41(1,"div",1)(2,"app-submit-btns",2),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.nrm(10,"input",8),e.DNE(11,Re,3,3,"p-message",9),e.k0s(),e.j41(12,"div",6)(13,"label",10),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.nrm(16,"app-auto-complete",11),e.DNE(17,Ne,3,3,"p-message",9),e.k0s(),e.j41(18,"div",6)(19,"label",12),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.nrm(22,"app-auto-complete",13),e.DNE(23,ke,3,3,"p-message",9),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(6),e.JRh(e.bMT(9,23,"Location Name")),e.R7$(3),e.vxM(o.isInvalid("Name")?11:-1),e.R7$(3),e.JRh(e.bMT(15,25,"Company Name")),e.R7$(2),e.Y8G("data",o.companyList)("displayField",e.lJ4(29,A))("searchFields",e.lJ4(30,A))("valueField","Id")("lookupData",o.companyList)("readonly",!1)("validStyle",o.isInvalid("CompanyId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CompanyId")?17:-1),e.R7$(3),e.JRh(e.bMT(21,27,"Customer Name")),e.R7$(2),e.Y8G("data",o.customerList)("displayField",e.lJ4(31,P))("searchFields",e.lJ4(32,P))("valueField","Id")("lookupData",o.customerList)("readonly",!1)("validStyle",o.isInvalid("CustomerId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CustomerId")?23:-1))},dependencies:[i.qT,i.me,i.BC,i.cb,f.V,i.j4,i.JD,M.S,v.QB,_.Sm,u.D9]})}return a})()},{path:"location/edit/:id",component:(()=>{class a{_locationService;_toastr;_destroyRef;translat;_activateRoute;_router;_location;_companyService;_customerService;data;errorMessage="";locationId;companyList;customerList;form=new i.gE({Name:new i.MJ("",[i.k0.required]),CustomerId:new i.MJ(0,[i.k0.required]),CompanyId:new i.MJ(0,[i.k0.required])});constructor(t,s,o,r,n,h,S,T,j){this._locationService=t,this._toastr=s,this._destroyRef=o,this.translat=r,this._activateRoute=n,this._router=h,this._location=S,this._companyService=T,this._customerService=j}ngOnInit(){this.locationId=Number(this._activateRoute.snapshot.paramMap.get("id")||""),this.locationId&&(this.locationById(this.locationId),this.getCompanyList(),this.getCustomerList()),this.form.valueChanges.pipe((0,l.pQ)(this._destroyRef)).subscribe()}getCompanyList(){this._companyService.getCompanyLookUp().pipe((0,l.pQ)(this._destroyRef)).subscribe({next:t=>{this.companyList=t},error:t=>{this.errorMessage=t.message}})}getCustomerList(){this._customerService.getCustomerLookUp().pipe((0,l.pQ)(this._destroyRef)).subscribe({next:t=>{this.customerList=t},error:t=>{this.errorMessage=t.message}})}locationById(t){this._locationService.getLocationById(t).subscribe({next:s=>{this.data=s,this.form.patchValue({Name:this.data.Name,CustomerId:this.data.CustomerId,CompanyId:this.data.CompanyId})},error:s=>{this.errorMessage=s.message}})}updateLocation(){this.form.valid&&this.locationId&&this._locationService.updateLocation(this.locationId,{Id:this.locationId,Name:this.form.value.Name,CustomerId:this.form.value.CustomerId,CompanyId:this.form.value.CompanyId,Tenant_ID:this.data.Tenant_ID}).pipe((0,l.pQ)(this._destroyRef)).subscribe({next:s=>{this.data=s,this._toastr.success(this.translat.instant("Location updated successfully")),this.backAfterEdit()},error:s=>{this.errorMessage=s.message,this._toastr.success(this.translat.instant("Failed to update Location"+this.errorMessage))}})}isInvalid(t){const s=this.form.get(t);return s?.invalid&&s.touched}backAfterEdit(){const t=this._location.path(),s=t.indexOf("/location");if(-1!==s){const o=t.substring(0,s+9);this._router.navigate([o])}else this._router.navigate(["/"])}navigateToCreate(){this._router.navigate(["../../add"],{relativeTo:this._activateRoute})}static \u0275fac=function(s){return new(s||a)(e.rXU(g.N),e.rXU(p.tw),e.rXU(e.abz),e.rXU(u.c$),e.rXU(c.nX),e.rXU(c.Ix),e.rXU(I.aZ),e.rXU(C),e.rXU(y.v))};static \u0275cmp=e.VBU({type:a,selectors:[["app-location-edit"]],decls:25,vars:36,consts:[[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center"],[3,"onAdd","showAdd","showPrint","showDelete"],[3,"reset","isSaveDisabled","showSelected"],[1,"card","p-3"],[1,"container"],[1,"row"],[1,"col-md-4"],["for","Name",1,"mb-2","d-block"],["pInputText","","type","text","id","Name","formControlName","Name",1,"w-100","mb-2"],["severity","error","size","small","variant","simple",1,"text-danger"],["for","CompanyList",1,"mb-2","d-block"],["formControlName","CompanyId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"],["for","CustomerList",1,"mb-2","d-block"],["formControlName","CustomerId",1,"w-100","mb-2",3,"data","displayField","searchFields","valueField","lookupData","readonly","validStyle"]],template:function(s,o){1&s&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.updateLocation()}),e.j41(1,"div",1)(2,"app-action-btns",2),e.bIt("onAdd",function(){return o.navigateToCreate()}),e.k0s(),e.j41(3,"app-submit-btns",3),e.bIt("reset",function(){return o.form.reset()}),e.k0s()(),e.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label",8),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.nrm(11,"input",9),e.DNE(12,Ee,3,3,"p-message",10),e.k0s(),e.j41(13,"div",7)(14,"label",11),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.nrm(17,"app-auto-complete",12),e.DNE(18,Fe,3,3,"p-message",10),e.k0s(),e.j41(19,"div",7)(20,"label",13),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.nrm(23,"app-auto-complete",14),e.DNE(24,Le,3,3,"p-message",10),e.k0s()()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("showAdd",!0)("showPrint",!0)("showDelete",!1),e.R7$(),e.Y8G("isSaveDisabled",o.form.invalid)("showSelected",!1),e.R7$(6),e.JRh(e.bMT(10,26,"Location Name")),e.R7$(3),e.vxM(o.isInvalid("Name")?12:-1),e.R7$(3),e.JRh(e.bMT(16,28,"Company Name")),e.R7$(2),e.Y8G("data",o.companyList)("displayField",e.lJ4(32,U))("searchFields",e.lJ4(33,U))("valueField","Id")("lookupData",o.companyList)("readonly",!1)("validStyle",o.isInvalid("CompanyId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CompanyId")?18:-1),e.R7$(3),e.JRh(e.bMT(22,30,"Customer Name")),e.R7$(2),e.Y8G("data",o.customerList)("displayField",e.lJ4(34,J))("searchFields",e.lJ4(35,J))("valueField","Id")("lookupData",o.customerList)("readonly",!1)("validStyle",o.isInvalid("CustomerId")?"ng-invalid":""),e.R7$(),e.vxM(o.isInvalid("CustomerId")?24:-1))},dependencies:[i.qT,i.me,i.BC,i.cb,k.t,f.V,i.j4,i.JD,M.S,v.QB,_.Sm,u.D9]})}return a})()}];let je=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275mod=e.$C({type:a});static \u0275inj=e.G2t({imports:[c.iI.forChild(Te),c.iI]})}return a})();var we=d(6176);let De=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275mod=e.$C({type:a});static \u0275inj=e.G2t({imports:[I.MD,je,we.G]})}return a})()}}]);